{"version":3,"sources":["../../../../../src/Apps/Artist/Routes/Overview/index.tsx"],"names":["OverviewRoute","props","action_type","Schema","ActionType","Click","subject","destination_path","artist","href","location","sidebarAggregations","showArtistInsights","insights","length","showArtistBio","Boolean","biography_blurb","text","showCurrentEvent","currentEvent","showConsignable","is_consignable","hideMainOverviewSection","colNum","isClient","window","showRecommendations","a","related","artists","edges","setState","isReadMoreExpanded","handleConsignClick","bind","_id","React","Component","ArtistOverviewQuery","OverviewRouteFragmentContainer"],"mappings":"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","sourcesContent":["import { Box, Col, Row, Sans, Separator, Spacer } from \"@artsy/palette\"\nimport { Overview_artist } from \"__generated__/Overview_artist.graphql\"\nimport { ArtistCollectionsRailContent as ArtistCollectionsRail } from \"Apps/Artist/Components/ArtistCollectionsRail\"\nimport { hasSections as showMarketInsights } from \"Apps/Artist/Components/MarketInsights/MarketInsights\"\nimport { GenesFragmentContainer as Genes } from \"Apps/Artist/Routes/Overview/Components/Genes\"\nimport { withSystemContext } from \"Artsy\"\nimport { track } from \"Artsy/Analytics\"\nimport * as Schema from \"Artsy/Analytics/Schema\"\nimport {\n  ArtistBioFragmentContainer as ArtistBio,\n  SelectedCareerAchievementsFragmentContainer as SelectedCareerAchievements,\n} from \"Components/v2\"\n\nimport { Location } from \"found\"\nimport React from \"react\"\nimport { createFragmentContainer, graphql, RelayRefetchProp } from \"react-relay\"\nimport { TrackingProp } from \"react-tracking\"\nimport { get } from \"Utils/get\"\nimport { ArtistArtworkFilterRefetchContainer as ArtworkFilter } from \"./Components/ArtistArtworkFilter\"\nimport { ArtistRecommendationsQueryRenderer as ArtistRecommendations } from \"./Components/ArtistRecommendations\"\nimport { CurrentEventFragmentContainer as CurrentEvent } from \"./Components/CurrentEvent\"\n\nexport interface OverviewRouteProps {\n  artist: Overview_artist\n  location?: Location\n  relay?: RelayRefetchProp\n  tracking?: TrackingProp\n}\n\n@track()\nexport class OverviewRoute extends React.Component<OverviewRouteProps, {}> {\n  @track<OverviewRouteProps>(props => ({\n    action_type: Schema.ActionType.Click,\n    // TODO: Feel like these should become enums too\n    subject: \"Learn more about consignment\",\n    destination_path: props.artist.href,\n  }))\n  handleConsignClick() {\n    // no-op\n  }\n\n  render() {\n    if (!this.props) {\n      return null\n    }\n\n    const { artist, location } = this.props\n    const { sidebarAggregations } = artist\n    const showArtistInsights =\n      showMarketInsights(this.props.artist) || artist.insights.length > 0\n    const showArtistBio = Boolean(artist.biography_blurb.text)\n    const showCurrentEvent = Boolean(artist.currentEvent)\n    const showConsignable = Boolean(artist.is_consignable)\n    const hideMainOverviewSection =\n      !showArtistInsights &&\n      !showArtistBio &&\n      !showCurrentEvent &&\n      !showConsignable\n\n    // TODO: Hide right column if missing current event. Waiting on feedback\n    const colNum = 9 // artist.currentEvent ? 9 : 12\n\n    const isClient = typeof window !== \"undefined\"\n    const showRecommendations =\n      isClient && get(artist, a => a.related.artists.edges.length, 0) > 0\n    return (\n      <>\n        <Row>\n          <Col sm={colNum}>\n            <>\n              {showArtistBio && (\n                <>\n                  <ArtistBio\n                    onReadMoreClicked={() => {\n                      this.setState({ isReadMoreExpanded: true })\n                    }}\n                    bio={artist}\n                  />\n                </>\n              )}\n              <>\n                <Spacer mb={1} />\n                <Genes artist={artist} />\n                <Spacer mb={1} />\n              </>\n              {showConsignable && (\n                <>\n                  <Spacer mb={1} />\n                  <Sans size=\"2\" color=\"black60\">\n                    Want to sell a work by this artist?{\" \"}\n                    <a\n                      href=\"/consign\"\n                      onClick={this.handleConsignClick.bind(this)}\n                    >\n                      Consign with Artsy\n                    </a>\n                    .\n                  </Sans>\n                </>\n              )}\n              {showArtistInsights && (\n                <>\n                  <Spacer mb={2} />\n                  <SelectedCareerAchievements artist={artist} />\n                </>\n              )}\n            </>\n          </Col>\n\n          {showCurrentEvent && (\n            <Col sm={3}>\n              <Box pl={2}>\n                <CurrentEvent artist={artist} />\n              </Box>\n            </Col>\n          )}\n        </Row>\n\n        {!hideMainOverviewSection && <Spacer mb={4} />}\n\n        <Box>{<ArtistCollectionsRail artistID={artist._id} />}</Box>\n\n        <Row>\n          <Col>\n            <span id=\"jump--artistArtworkGrid\" />\n\n            <ArtworkFilter\n              artist={artist}\n              location={location}\n              sidebarAggregations={sidebarAggregations}\n            />\n          </Col>\n        </Row>\n\n        {showRecommendations && (\n          <Row>\n            <Col>\n              <Separator mt={6} mb={4} />\n              <ArtistRecommendations artistID={artist._id} />\n            </Col>\n          </Row>\n        )}\n      </>\n    )\n  }\n}\n\nexport const ArtistOverviewQuery = graphql`\n  query OverviewQuery(\n    $acquireable: Boolean\n    $aggregations: [ArtworkAggregation] = [\n      MEDIUM\n      TOTAL\n      GALLERY\n      INSTITUTION\n      MAJOR_PERIOD\n    ]\n    $artist_id: String!\n    $at_auction: Boolean\n    $attribution_class: [String]\n    $color: String\n    $for_sale: Boolean\n    $hasFilter: Boolean!\n    $height: String\n    $inquireable_only: Boolean\n    $keyword: String\n    $major_periods: [String]\n    $medium: String\n    $offerable: Boolean\n    $page: Int\n    $partner_category: [String]\n    $partner_id: ID\n    $price_range: String\n    $sort: String\n    $width: String\n  ) {\n    artist(id: $artist_id) {\n      ...Overview_artist\n        @arguments(\n          acquireable: $acquireable\n          aggregations: $aggregations\n          artist_id: $artist_id\n          at_auction: $at_auction\n          attribution_class: $attribution_class\n          color: $color\n          for_sale: $for_sale\n          hasFilter: $hasFilter\n          height: $height\n          inquireable_only: $inquireable_only\n          keyword: $keyword\n          major_periods: $major_periods\n          medium: $medium\n          offerable: $offerable\n          page: $page\n          partner_id: $partner_id\n          price_range: $price_range\n          sort: $sort\n          width: $width\n        )\n    }\n  }\n`\n\nexport const OverviewRouteFragmentContainer = createFragmentContainer(\n  withSystemContext(OverviewRoute),\n  {\n    artist: graphql`\n      fragment Overview_artist on Artist\n        @argumentDefinitions(\n          partner_category: {\n            type: \"[String]\"\n            defaultValue: [\"blue-chip\", \"top-established\", \"top-emerging\"]\n          }\n          acquireable: { type: \"Boolean\" }\n          aggregations: { type: \"[ArtworkAggregation]\" }\n          artist_id: { type: \"String\" }\n          at_auction: { type: \"Boolean\" }\n          attribution_class: { type: \"[String]\" }\n          color: { type: \"String\" }\n          for_sale: { type: \"Boolean\" }\n          hasFilter: { type: \"Boolean\", defaultValue: false }\n          height: { type: \"String\" }\n          inquireable_only: { type: \"Boolean\" }\n          keyword: { type: \"String\" }\n          major_periods: { type: \"[String]\" }\n          medium: { type: \"String\", defaultValue: \"*\" }\n          offerable: { type: \"Boolean\" }\n          page: { type: \"Int\" }\n          partner_id: { type: \"ID\" }\n          price_range: { type: \"String\" }\n          sort: { type: \"String\", defaultValue: \"-partner_updated_at\" }\n          width: { type: \"String\" }\n        ) {\n        ...ArtistBio_bio\n        ...CurrentEvent_artist\n        ...MarketInsights_artist\n        ...SelectedCareerAchievements_artist\n        ...Genes_artist\n        ...FollowArtistButton_artist\n        id\n        counts {\n          partner_shows\n          for_sale_artworks\n          ecommerce_artworks\n          auction_artworks\n          artworks\n          has_make_offer_artworks\n        }\n        href\n        is_consignable\n        # NOTE: The following are used to determine whether sections\n        # should be rendered.\n        biography_blurb(format: HTML, partner_bio: true) {\n          text\n          credit\n        }\n        currentEvent {\n          name\n        }\n        related {\n          genes {\n            edges {\n              node {\n                id\n              }\n            }\n          }\n          artists(first: 1) {\n            edges {\n              node {\n                __id\n              }\n            }\n          }\n        }\n        _id\n        collections\n        highlights {\n          partners(\n            first: 10\n            display_on_partner_profile: true\n            represented_by: true\n            partner_category: $partner_category\n          ) {\n            edges {\n              node {\n                categories {\n                  id\n                }\n              }\n            }\n          }\n        }\n        insights {\n          type\n        }\n\n        sidebarAggregations: filtered_artworks(\n          sort: $sort\n          page: $page\n          aggregations: $aggregations\n        ) {\n          aggregations {\n            slice\n            counts {\n              name\n              id\n            }\n          }\n          # Include the below fragment so that this will match\n          # the initial load (w/ no filter applied), and thus MP\n          # will consolidate aggregations _and_ the grid into one call.\n          # Leave out this fragment if navigating to the artist page\n          # with a filter applied, as those can't be consolidated and\n          # this is extra data.\n          artworks_connection(first: 30, after: \"\") @skip(if: $hasFilter) {\n            edges {\n              node {\n                id\n              }\n            }\n          }\n        }\n\n        ...ArtistArtworkFilter_artist\n          @arguments(\n            acquireable: $acquireable\n            aggregations: $aggregations\n            artist_id: $artist_id\n            at_auction: $at_auction\n            attribution_class: $attribution_class\n            color: $color\n            for_sale: $for_sale\n            hasFilter: $hasFilter\n            height: $height\n            inquireable_only: $inquireable_only\n            keyword: $keyword\n            major_periods: $major_periods\n            medium: $medium\n            offerable: $offerable\n            page: $page\n            partner_id: $partner_id\n            price_range: $price_range\n            sort: $sort\n            width: $width\n          )\n      }\n    `,\n  }\n)\n"],"file":"index.js"}