{"version":3,"sources":["../../../../../src/Apps/Artwork/Components/ArtworkDetails/ArtworkDetailsAboutTheWorkFromPartner.tsx"],"names":["ArtworkDetailsAboutTheWorkFromPartner","context_module","Schema","ContextModule","AboutTheWorkPartner","dispatch","data","Events","postEvent","action_type","ActionType","Click","flow","Flow","ArtworkAboutTheWork","subject","Subject","ReadMore","type","Type","Button","mediator","partner","entity","contextModule","ArtworkPage","intent","AuthModalIntent","FollowPartner","breakpoint","additional_information","props","artwork","xs","maxChars","READ_MORE_MAX_CHARS","default","trackReadMoreClick","bind","locationNames","p","locations","join","showPartnerLogo","sale","isBenefit","isGalleryAuction","imageUrl","profile","icon","url","partnerInitials","initials","showPartnerFollow","hasDefaultPublicProfile","is_default_profile_public","partnerName","name","user","sd","APP_URL","href","modelName","OwnerType","Partner","entity_id","_id","entity_slug","id","handleOpenAuth","is_followed","cursor","textDecoration","renderReadMore","React","Component","ArtworkDetailsAboutTheWorkFromPartnerFragmentContainer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AAEA;;AACA;;AACA;;AAEA;;AAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAcaA,qC,WARZ,sBACC;AACEC,EAAAA,cAAc,EAAEC,MAAM,CAACC,aAAP,CAAqBC;AADvC,CADD,EAIC;AACEC,EAAAA,QAAQ,EAAE,kBAAAC,IAAI;AAAA,WAAIC,gBAAOC,SAAP,CAAiBF,IAAjB,CAAJ;AAAA;AADhB,CAJD,C,UAWE,sBAAM;AACLG,EAAAA,WAAW,EAAEP,MAAM,CAACQ,UAAP,CAAkBC,KAD1B;AAELC,EAAAA,IAAI,EAAEV,MAAM,CAACW,IAAP,CAAYC,mBAFb;AAGLC,EAAAA,OAAO,EAAEb,MAAM,CAACc,OAAP,CAAeC,QAHnB;AAILC,EAAAA,IAAI,EAAEhB,MAAM,CAACiB,IAAP,CAAYC;AAJb,CAAN,C;;;;;;;;;;;;;;;;;;qEAUgB,UAACC,QAAD,EAAWC,OAAX,EAAuB;AACtC,wCAAcD,QAAd,EAAwB;AACtBE,QAAAA,MAAM,EAAED,OADc;AAEtBE,QAAAA,aAAa,EAAEtB,MAAM,CAACC,aAAP,CAAqBsB,WAFd;AAGtBC,QAAAA,MAAM,EAAEC,+BAAgBC;AAHF,OAAxB;AAKD,K;;;;;;;yCAVoB,CACnB;AACD;;;mCAUcC,U,EAAqB;AAAA,UAC1BC,sBAD0B,GACC,KAAKC,KAAL,CAAWC,OADZ,CAC1BF,sBAD0B;AAElC,UAAMG,EAAE,GAAGJ,UAAU,KAAK,IAA1B;AACA,UAAMK,QAAQ,GAAGD,EAAE,GAAGE,yDAAoBF,EAAvB,GAA4BE,yDAAoBC,OAAnE;AAEA,aACE,6BAAC,iBAAD;AACE,QAAA,QAAQ,EAAEF,QADZ;AAEE,QAAA,OAAO,EAAEJ,sBAFX;AAGE,QAAA,iBAAiB,EAAE,KAAKO,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B;AAHrB,QADF;AAOD;;;6BAEQ;AAAA;;AAAA,UACCN,OADD,GACa,KAAKD,KADlB,CACCC,OADD;AAAA,UAECF,sBAFD,GAEqCE,OAFrC,CAECF,sBAFD;AAAA,UAEyBR,OAFzB,GAEqCU,OAFrC,CAEyBV,OAFzB;AAGP,UAAMiB,aAAa,GAAG,cACpBjB,OADoB,EAEpB,UAAAkB,CAAC;AAAA,eAAI,oCAAe,sCAAgBA,CAAC,CAACC,SAAlB,CAAf,EAA6C,CAA7C,CAAJ;AAAA,OAFmB,EAGpB,EAHoB,EAIpBC,IAJoB,CAIf,IAJe,CAAtB,CAHO,CASP;;AACA,UAAMC,eAAe,GAAG,EACtBX,OAAO,CAACY,IAAR,KACCZ,OAAO,CAACY,IAAR,CAAaC,SAAb,IAA0Bb,OAAO,CAACY,IAAR,CAAaE,gBADxC,CADsB,CAAxB;AAIA,UAAMC,QAAQ,GAAGJ,eAAe,IAAI,cAAIrB,OAAJ,EAAa,UAAAkB,CAAC;AAAA,eAAIA,CAAC,CAACQ,OAAF,CAAUC,IAAV,CAAeC,GAAnB;AAAA,OAAd,CAApC;AACA,UAAMC,eAAe,GAAGR,eAAe,IAAI,cAAIrB,OAAJ,EAAa,UAAAkB,CAAC;AAAA,eAAIA,CAAC,CAACY,QAAN;AAAA,OAAd,CAA3C;AACA,UAAMC,iBAAiB,GACrB/B,OAAO,IAAIA,OAAO,CAACJ,IAAR,KAAiB,eAA5B,IAA+CI,OAAO,CAAC0B,OADzD;AAEA,UAAMM,uBAAuB,GAAGhC,OAAO,IAAIA,OAAO,CAACiC,yBAAnD;AACA,UAAMC,WAAW,GAAGlC,OAAO,IAAIA,OAAO,CAACmC,IAAvC;AAEA,aACE,6BAAC,4BAAD,QACG,gBAAwB;AAAA,YAArBC,IAAqB,QAArBA,IAAqB;AAAA,YAAfrC,QAAe,QAAfA,QAAe;AACvB,eACE,6BAAC,2BAAD;AAAoB,UAAA,CAAC,EAAE;AAAvB,WACE,6BAAC,YAAD,QACE,6BAAC,qBAAD;AACE,UAAA,IAAI,EAAEmC,WADR;AAEE,UAAA,IAAI,EACFF,uBAAuB,cAAOK,cAAGC,OAAV,SAAoBtC,OAAO,CAACuC,IAA5B,CAH3B;AAKE,UAAA,IAAI,EAAEtB,aALR;AAME,UAAA,QAAQ,EAAEQ,QANZ;AAOE,UAAA,QAAQ,EAAEI,eAPZ;AAQE,UAAA,YAAY,EACVE,iBAAiB,IACf,6BAAC,yDAAD;AACE,YAAA,OAAO,EAAE/B,OAAO,CAAC0B,OADnB;AAEE,YAAA,IAAI,EAAEU,IAFR;AAGE,YAAA,YAAY,EAAE;AACZI,cAAAA,SAAS,EAAE5D,MAAM,CAAC6D,SAAP,CAAiBC,OADhB;AAEZ/D,cAAAA,cAAc,EACZC,MAAM,CAACC,aAAP,CAAqBC,mBAHX;AAIZ6D,cAAAA,SAAS,EAAE3C,OAAO,CAAC4C,GAJP;AAKZC,cAAAA,WAAW,EAAE7C,OAAO,CAAC8C;AALT,aAHhB;AAUE,YAAA,eAAe,EAAE;AAAA,qBACf,MAAI,CAACC,cAAL,CAAoBhD,QAApB,EAA8BC,OAA9B,CADe;AAAA,aAVnB;AAaE,YAAA,MAAM,EAAE,gBAAC0B,OAAD,EAA0C;AAChD,kBAAMsB,WAAW,GAAGtB,OAAO,CAACsB,WAAR,IAAuB,KAA3C;AACA,qBACE,6BAAC,aAAD;AACE,gBAAA,IAAI,EAAC,GADP;AAEE,gBAAA,MAAM,EAAC,QAFT;AAGE,gBAAA,KAAK,EAAC,OAHR;AAIE,gBAAA,KAAK,EAAE;AACLC,kBAAAA,MAAM,EAAE,SADH;AAELC,kBAAAA,cAAc,EAAE;AAFX;AAJT,iBASGF,WAAW,GAAG,WAAH,GAAiB,QAT/B,CADF;AAaD;AA5BH;AAVN,UADF,EA8CGxC,sBAAsB,IACrB,6BAAC,cAAD,CAAO,QAAP,QACE,6BAAC,eAAD;AAAQ,UAAA,EAAE,EAAE;AAAZ,UADF,EAEE,6BAAC,cAAD;AAAO,UAAA,IAAI,EAAC;AAAZ,WACE,6BAAC,iBAAD;AAAO,UAAA,EAAE,EAAC;AAAV,WAAgB,MAAI,CAAC2C,cAAL,CAAoB,IAApB,CAAhB,CADF,EAEE,6BAAC,iBAAD;AAAO,UAAA,WAAW,EAAC;AAAnB,WAAyB,MAAI,CAACA,cAAL,EAAzB,CAFF,CAFF,CA/CJ,CADF,CADF;AA4DD,OA9DH,CADF;AAkED;;;;EA1HwDC,eAAMC,S;;AA6H1D,IAAMC,sDAAsD,GAAG,yCACpE5E,qCADoE,EAEpE;AACEgC,EAAAA,OAAO;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AADT,CAFoE,CAA/D","sourcesContent":["import { filterLocations } from \"Apps/Artwork/Utils/filterLocations\"\nimport { limitWithCount } from \"Apps/Artwork/Utils/limitWithCount\"\nimport { SystemContextConsumer } from \"Artsy\"\nimport { FollowProfileButtonFragmentContainer as FollowProfileButton } from \"Components/FollowButton/FollowProfileButton\"\nimport React from \"react\"\nimport { createFragmentContainer, graphql } from \"react-relay\"\nimport { get } from \"Utils/get\"\nimport { Media } from \"Utils/Responsive\"\nimport { READ_MORE_MAX_CHARS } from \"./ArtworkDetailsAboutTheWorkFromArtsy\"\n\nimport { ArtworkDetailsAboutTheWorkFromPartner_artwork } from \"__generated__/ArtworkDetailsAboutTheWorkFromPartner_artwork.graphql\"\nimport { data as sd } from \"sharify\"\n\nimport { track } from \"Artsy/Analytics\"\nimport * as Schema from \"Artsy/Analytics/Schema\"\nimport Events from \"Utils/Events\"\n\nimport {\n  Box,\n  EntityHeader,\n  ReadMore,\n  Sans,\n  Serif,\n  Spacer,\n  StackableBorderBox,\n} from \"@artsy/palette\"\nimport { FollowProfileButton_profile } from \"__generated__/FollowProfileButton_profile.graphql\"\nimport { AuthModalIntent, openAuthModal } from \"Utils/openAuthModal\"\n\nexport interface ArtworkDetailsAboutTheWorkFromPartnerProps {\n  artwork: ArtworkDetailsAboutTheWorkFromPartner_artwork\n}\n\n@track(\n  {\n    context_module: Schema.ContextModule.AboutTheWorkPartner,\n  },\n  {\n    dispatch: data => Events.postEvent(data),\n  }\n)\nexport class ArtworkDetailsAboutTheWorkFromPartner extends React.Component<\n  ArtworkDetailsAboutTheWorkFromPartnerProps\n> {\n  @track({\n    action_type: Schema.ActionType.Click,\n    flow: Schema.Flow.ArtworkAboutTheWork,\n    subject: Schema.Subject.ReadMore,\n    type: Schema.Type.Button,\n  })\n  trackReadMoreClick() {\n    // noop\n  }\n\n  handleOpenAuth = (mediator, partner) => {\n    openAuthModal(mediator, {\n      entity: partner,\n      contextModule: Schema.ContextModule.ArtworkPage,\n      intent: AuthModalIntent.FollowPartner,\n    })\n  }\n\n  renderReadMore(breakpoint?: string) {\n    const { additional_information } = this.props.artwork\n    const xs = breakpoint === \"xs\"\n    const maxChars = xs ? READ_MORE_MAX_CHARS.xs : READ_MORE_MAX_CHARS.default\n\n    return (\n      <ReadMore\n        maxChars={maxChars}\n        content={additional_information}\n        onReadMoreClicked={this.trackReadMoreClick.bind(this)}\n      />\n    )\n  }\n\n  render() {\n    const { artwork } = this.props\n    const { additional_information, partner } = artwork\n    const locationNames = get(\n      partner,\n      p => limitWithCount(filterLocations(p.locations), 2),\n      []\n    ).join(\", \")\n\n    // Partner avatar is not shown for artworks from benefit auctions or gallery auctions\n    const showPartnerLogo = !(\n      artwork.sale &&\n      (artwork.sale.isBenefit || artwork.sale.isGalleryAuction)\n    )\n    const imageUrl = showPartnerLogo && get(partner, p => p.profile.icon.url)\n    const partnerInitials = showPartnerLogo && get(partner, p => p.initials)\n    const showPartnerFollow =\n      partner && partner.type !== \"Auction House\" && partner.profile\n    const hasDefaultPublicProfile = partner && partner.is_default_profile_public\n    const partnerName = partner && partner.name\n\n    return (\n      <SystemContextConsumer>\n        {({ user, mediator }) => {\n          return (\n            <StackableBorderBox p={2}>\n              <Box>\n                <EntityHeader\n                  name={partnerName}\n                  href={\n                    hasDefaultPublicProfile && `${sd.APP_URL}${partner.href}`\n                  }\n                  meta={locationNames}\n                  imageUrl={imageUrl}\n                  initials={partnerInitials}\n                  FollowButton={\n                    showPartnerFollow && (\n                      <FollowProfileButton\n                        profile={partner.profile}\n                        user={user}\n                        trackingData={{\n                          modelName: Schema.OwnerType.Partner,\n                          context_module:\n                            Schema.ContextModule.AboutTheWorkPartner,\n                          entity_id: partner._id,\n                          entity_slug: partner.id,\n                        }}\n                        onOpenAuthModal={() =>\n                          this.handleOpenAuth(mediator, partner)\n                        }\n                        render={(profile: FollowProfileButton_profile) => {\n                          const is_followed = profile.is_followed || false\n                          return (\n                            <Sans\n                              size=\"2\"\n                              weight=\"medium\"\n                              color=\"black\"\n                              style={{\n                                cursor: \"pointer\",\n                                textDecoration: \"underline\",\n                              }}\n                            >\n                              {is_followed ? \"Following\" : \"Follow\"}\n                            </Sans>\n                          )\n                        }}\n                      >\n                        Follow\n                      </FollowProfileButton>\n                    )\n                  }\n                />\n                {additional_information && (\n                  <React.Fragment>\n                    <Spacer mb={1} />\n                    <Serif size=\"3\">\n                      <Media at=\"xs\">{this.renderReadMore(\"xs\")}</Media>\n                      <Media greaterThan=\"xs\">{this.renderReadMore()}</Media>\n                    </Serif>\n                  </React.Fragment>\n                )}\n              </Box>\n            </StackableBorderBox>\n          )\n        }}\n      </SystemContextConsumer>\n    )\n  }\n}\n\nexport const ArtworkDetailsAboutTheWorkFromPartnerFragmentContainer = createFragmentContainer(\n  ArtworkDetailsAboutTheWorkFromPartner,\n  {\n    artwork: graphql`\n      fragment ArtworkDetailsAboutTheWorkFromPartner_artwork on Artwork {\n        additional_information(format: HTML)\n        sale {\n          isBenefit\n          isGalleryAuction\n        }\n        partner {\n          _id\n          id\n          type\n          href\n          name\n          initials\n          locations {\n            city\n          }\n          is_default_profile_public\n          profile {\n            ...FollowProfileButton_profile\n            id\n            icon {\n              url(version: \"square140\")\n            }\n          }\n        }\n      }\n    `,\n  }\n)\n"],"file":"ArtworkDetailsAboutTheWorkFromPartner.js"}