{"version":3,"sources":["../../../../../src/Apps/Artwork/Components/ArtworkSidebar/ArtworkSidebarCommercial.tsx"],"names":["Row","children","others","logger","ArtworkSidebarCommercialContainer","props","context_module","Schema","ContextModule","Sidebar","action_type","ActionType","ClickedContactGallery","subject","Subject","ContactGallery","artwork_id","artwork","_id","artwork_slug","id","state","args","ClickedBuyNow","flow","Flow","BuyNow","type","Type","Button","products","product_id","quantity","price","value","ClickedMakeOffer","MakeOffer","isCommittingCreateOrderMutation","isCommittingCreateOfferOrderMutation","isErrorModalOpen","selectedEditionSet","firstAvailableEcommerceEditionSet","error","setState","editionSets","edition_sets","find","editionSet","is_acquireable","is_offerable","saleMessage","includeSelectOption","editionEcommerceAvailable","editionFragment","sale_message","e","editionSetsFragment","map","index","__id","renderEditionSet","length","mediator","trigger","artworkId","user","relay","environment","mutation","variables","input","editionSetId","onCompleted","data","orderOrError","commerceCreateOrderWithArtwork","onMutationError","ErrorWithMetadata","code","window","location","assign","order","onError","mode","redirectTo","href","commerceCreateOfferOrderWithArtwork","artworkEcommerceAvailable","is_inquireable","renderSaleMessage","renderEditionSets","shippingOrigin","shippingInfo","priceIncludesTaxDisplay","handleCreateOrder","bind","handleCreateOfferOrder","handleInquiry","onCloseModal","React","Component","ArtworkSidebarCommercial","SystemContext","ArtworkSidebarCommercialFragmentContainer"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Button,\n  Flex,\n  FlexProps,\n  Radio,\n  RadioGroup,\n  Sans,\n  Separator,\n  Serif,\n  Spacer,\n} from \"@artsy/palette\"\nimport { ArtworkSidebarCommercial_artwork } from \"__generated__/ArtworkSidebarCommercial_artwork.graphql\"\nimport { ArtworkSidebarCommercialOfferOrderMutation } from \"__generated__/ArtworkSidebarCommercialOfferOrderMutation.graphql\"\nimport { ArtworkSidebarCommercialOrderMutation } from \"__generated__/ArtworkSidebarCommercialOrderMutation.graphql\"\nimport { Mediator, SystemContext } from \"Artsy\"\nimport { track } from \"Artsy/Analytics\"\nimport * as Schema from \"Artsy/Analytics/Schema\"\nimport { ErrorModal } from \"Components/Modal/ErrorModal\"\nimport currency from \"currency.js\"\nimport React, { FC, useContext } from \"react\"\nimport {\n  commitMutation,\n  createFragmentContainer,\n  graphql,\n  RelayProp,\n} from \"react-relay\"\nimport { ErrorWithMetadata } from \"Utils/errors\"\nimport { get } from \"Utils/get\"\nimport createLogger from \"Utils/logger\"\nimport { ArtworkSidebarSizeInfoFragmentContainer as SizeInfo } from \"./ArtworkSidebarSizeInfo\"\n\ntype EditionSet = ArtworkSidebarCommercial_artwork[\"edition_sets\"][0]\n\nexport interface ArtworkSidebarCommercialContainerProps\n  extends ArtworkSidebarCommercialProps {\n  mediator: Mediator\n  user: User\n}\n\nexport interface ArtworkSidebarCommercialContainerState {\n  isCommittingCreateOrderMutation: boolean\n  isCommittingCreateOfferOrderMutation: boolean\n  isErrorModalOpen: boolean\n  selectedEditionSet: EditionSet\n}\n\nconst Row: React.SFC<FlexProps> = ({ children, ...others }) => (\n  <Flex justifyContent=\"left\" {...others}>\n    {children}\n  </Flex>\n)\n\nconst logger = createLogger(\n  \"Artwork/Components/ArtworkSidebar/ArtworkSidebarCommercial.tsx\"\n)\n\n@track()\nexport class ArtworkSidebarCommercialContainer extends React.Component<\n  ArtworkSidebarCommercialContainerProps,\n  ArtworkSidebarCommercialContainerState\n> {\n  state: ArtworkSidebarCommercialContainerState = {\n    isCommittingCreateOrderMutation: false,\n    isCommittingCreateOfferOrderMutation: false,\n    isErrorModalOpen: false,\n    selectedEditionSet: this.firstAvailableEcommerceEditionSet(),\n  }\n\n  firstAvailableEcommerceEditionSet(): EditionSet {\n    const editionSets = this.props.artwork.edition_sets\n\n    return editionSets.find(editionSet => {\n      return editionSet.is_acquireable || editionSet.is_offerable\n    })\n  }\n\n  renderSaleMessage(saleMessage: string) {\n    return (\n      <Serif size=\"5t\" weight=\"semibold\">\n        {saleMessage}\n      </Serif>\n    )\n  }\n\n  renderEditionSet(editionSet: EditionSet, includeSelectOption: boolean) {\n    const editionEcommerceAvailable =\n      editionSet.is_acquireable || editionSet.is_offerable\n\n    const editionFragment = (\n      <>\n        <SizeInfo piece={editionSet} />\n        <Serif ml=\"auto\" size=\"2\">\n          {editionSet.sale_message}\n        </Serif>\n      </>\n    )\n    if (includeSelectOption) {\n      return (\n        <Row>\n          <Radio\n            mr=\"1\"\n            onSelect={e => {\n              this.setState({ selectedEditionSet: editionSet })\n            }}\n            selected={this.state.selectedEditionSet === editionSet}\n            disabled={!editionEcommerceAvailable}\n            label={editionFragment}\n          />\n        </Row>\n      )\n    } else {\n      return <Row>{editionFragment}</Row>\n    }\n  }\n\n  renderEditionSets(includeSelectOption: boolean) {\n    const editionSets = this.props.artwork.edition_sets\n\n    const editionSetsFragment = editionSets.map((editionSet, index) => {\n      return (\n        <React.Fragment key={editionSet.__id}>\n          <Box py={3}>\n            {this.renderEditionSet(editionSet, includeSelectOption)}\n          </Box>\n          {index !== editionSets.length - 1 && <Separator />}\n        </React.Fragment>\n      )\n    })\n\n    return <RadioGroup>{editionSetsFragment}</RadioGroup>\n  }\n\n  onMutationError = (error: ErrorWithMetadata) => {\n    logger.error(error)\n    this.setState({\n      isCommittingCreateOrderMutation: false,\n      isErrorModalOpen: true,\n    })\n  }\n\n  onCloseModal = () => {\n    this.setState({ isErrorModalOpen: false })\n  }\n\n  @track<ArtworkSidebarCommercialContainerProps>(props => ({\n    context_module: Schema.ContextModule.Sidebar,\n    action_type: Schema.ActionType.ClickedContactGallery,\n    subject: Schema.Subject.ContactGallery,\n    artwork_id: props.artwork._id,\n    artwork_slug: props.artwork.id,\n  }))\n  handleInquiry() {\n    get(this.props, props => props.mediator.trigger) &&\n      this.props.mediator.trigger(\"launchInquiryFlow\", {\n        artworkId: this.props.artwork.id,\n      })\n  }\n\n  @track<ArtworkSidebarCommercialContainerProps>((props, state, args) => ({\n    action_type: Schema.ActionType.ClickedBuyNow,\n    flow: Schema.Flow.BuyNow,\n    type: Schema.Type.Button,\n    artwork_id: props.artwork._id,\n    artwork_slug: props.artwork.id,\n    products: [\n      {\n        product_id: props.artwork._id,\n        quantity: 1,\n        price: currency(props.artwork.price).value,\n      },\n    ],\n  }))\n  handleCreateOrder() {\n    const { user, mediator } = this.props\n    if (user && user.id) {\n      this.setState({ isCommittingCreateOrderMutation: true }, () => {\n        if (get(this.props, props => props.relay.environment)) {\n          commitMutation<ArtworkSidebarCommercialOrderMutation>(\n            this.props.relay.environment,\n            {\n              mutation: graphql`\n                mutation ArtworkSidebarCommercialOrderMutation(\n                  $input: CommerceCreateOrderWithArtworkInput!\n                ) {\n                  commerceCreateOrderWithArtwork(input: $input) {\n                    orderOrError {\n                      ... on CommerceOrderWithMutationSuccess {\n                        __typename\n                        order {\n                          id\n                          mode\n                        }\n                      }\n                      ... on CommerceOrderWithMutationFailure {\n                        error {\n                          type\n                          code\n                          data\n                        }\n                      }\n                    }\n                  }\n                }\n              `,\n              variables: {\n                input: {\n                  artworkId: this.props.artwork._id,\n                  editionSetId: get(\n                    this.state,\n                    state => state.selectedEditionSet.id\n                  ),\n                },\n              },\n              onCompleted: data => {\n                this.setState(\n                  { isCommittingCreateOrderMutation: false },\n                  () => {\n                    const {\n                      commerceCreateOrderWithArtwork: { orderOrError },\n                    } = data\n                    if (orderOrError.error) {\n                      this.onMutationError(\n                        new ErrorWithMetadata(\n                          orderOrError.error.code,\n                          orderOrError.error\n                        )\n                      )\n                    } else {\n                      window.location.assign(`/orders/${orderOrError.order.id}`)\n                    }\n                  }\n                )\n              },\n              onError: this.onMutationError,\n            }\n          )\n        }\n      })\n    } else {\n      mediator.trigger(\"open:auth\", {\n        mode: \"login\",\n        redirectTo: location.href,\n      })\n    }\n  }\n\n  @track<ArtworkSidebarCommercialContainerProps>((props, state, args) => ({\n    action_type: Schema.ActionType.ClickedMakeOffer,\n    flow: Schema.Flow.MakeOffer,\n    type: Schema.Type.Button,\n    artwork_id: props.artwork._id,\n    artwork_slug: props.artwork.id,\n  }))\n  handleCreateOfferOrder() {\n    const { user, mediator } = this.props\n    if (user && user.id) {\n      this.setState({ isCommittingCreateOfferOrderMutation: true }, () => {\n        if (get(this.props, props => props.relay.environment)) {\n          commitMutation<ArtworkSidebarCommercialOfferOrderMutation>(\n            this.props.relay.environment,\n            {\n              mutation: graphql`\n                mutation ArtworkSidebarCommercialOfferOrderMutation(\n                  $input: CommerceCreateOfferOrderWithArtworkInput!\n                ) {\n                  commerceCreateOfferOrderWithArtwork(input: $input) {\n                    orderOrError {\n                      ... on CommerceOrderWithMutationSuccess {\n                        __typename\n                        order {\n                          id\n                          mode\n                        }\n                      }\n                      ... on CommerceOrderWithMutationFailure {\n                        error {\n                          type\n                          code\n                          data\n                        }\n                      }\n                    }\n                  }\n                }\n              `,\n              variables: {\n                input: {\n                  artworkId: this.props.artwork._id,\n                  editionSetId: get(\n                    this.state,\n                    state => state.selectedEditionSet.id\n                  ),\n                },\n              },\n              onCompleted: data => {\n                this.setState(\n                  { isCommittingCreateOfferOrderMutation: false },\n                  () => {\n                    const {\n                      commerceCreateOfferOrderWithArtwork: { orderOrError },\n                    } = data\n                    if (orderOrError.error) {\n                      this.onMutationError(\n                        new ErrorWithMetadata(\n                          orderOrError.error.code,\n                          orderOrError.error\n                        )\n                      )\n                    } else {\n                      window.location.assign(\n                        `/orders/${orderOrError.order.id}/offer`\n                      )\n                    }\n                  }\n                )\n              },\n              onError: this.onMutationError,\n            }\n          )\n        }\n      })\n    } else {\n      mediator.trigger(\"open:auth\", {\n        mode: \"login\",\n        redirectTo: location.href,\n      })\n    }\n  }\n\n  render() {\n    const { artwork } = this.props\n    const {\n      isCommittingCreateOrderMutation,\n      isCommittingCreateOfferOrderMutation,\n      selectedEditionSet,\n    } = this.state\n    const artworkEcommerceAvailable =\n      artwork.is_acquireable || artwork.is_offerable\n\n    if (!artwork.sale_message && !artwork.is_inquireable) {\n      return <Separator />\n    }\n\n    return (\n      <Box textAlign=\"left\">\n        {artwork.sale_message && <Separator />}\n\n        {artwork.edition_sets.length < 2 ? (\n          artwork.sale_message && (\n            <>\n              <Spacer mb={3} />\n              {this.renderSaleMessage(artwork.sale_message)}\n            </>\n          )\n        ) : (\n          <>\n            {this.renderEditionSets(artworkEcommerceAvailable)}\n            {selectedEditionSet && (\n              <>\n                <Separator mb={3} />\n                {this.renderSaleMessage(selectedEditionSet.sale_message)}\n              </>\n            )}\n          </>\n        )}\n\n        {artworkEcommerceAvailable &&\n          (artwork.shippingOrigin || artwork.shippingInfo) && <Spacer mt={1} />}\n        {artworkEcommerceAvailable && artwork.shippingOrigin && (\n          <Sans size=\"2\" color=\"black60\">\n            Ships from {artwork.shippingOrigin}\n          </Sans>\n        )}\n        {artworkEcommerceAvailable && artwork.shippingInfo && (\n          <Sans size=\"2\" color=\"black60\">\n            {artwork.shippingInfo}\n          </Sans>\n        )}\n        {artworkEcommerceAvailable && artwork.priceIncludesTaxDisplay && (\n          <Sans size=\"2\" color=\"black60\">\n            {artwork.priceIncludesTaxDisplay}\n          </Sans>\n        )}\n\n        {artwork.is_inquireable ||\n        artwork.is_acquireable ||\n        artwork.is_offerable ? (\n          artwork.sale_message && <Spacer mb={3} />\n        ) : (\n          <Separator mb={3} mt={3} />\n        )}\n        {artwork.is_acquireable && (\n          <Button\n            width=\"100%\"\n            size=\"large\"\n            loading={isCommittingCreateOrderMutation}\n            onClick={this.handleCreateOrder.bind(this)}\n          >\n            Buy now\n          </Button>\n        )}\n        {artwork.is_offerable && (\n          <>\n            <Spacer mb={2} />\n            <Button\n              variant={\n                artwork.is_acquireable ? \"secondaryOutline\" : \"primaryBlack\"\n              }\n              width=\"100%\"\n              size=\"large\"\n              loading={isCommittingCreateOfferOrderMutation}\n              onClick={this.handleCreateOfferOrder.bind(this)}\n            >\n              Make offer\n            </Button>\n          </>\n        )}\n        {artwork.is_inquireable &&\n          !artwork.is_acquireable &&\n          !artwork.is_offerable && (\n            <Button\n              width=\"100%\"\n              size=\"large\"\n              onClick={this.handleInquiry.bind(this)}\n            >\n              Contact gallery\n            </Button>\n          )}\n\n        <ErrorModal\n          onClose={this.onCloseModal}\n          show={this.state.isErrorModalOpen}\n          contactEmail=\"orders@artsy.net\"\n        />\n      </Box>\n    )\n  }\n}\n\ninterface ArtworkSidebarCommercialProps {\n  artwork: ArtworkSidebarCommercial_artwork\n  relay?: RelayProp\n}\n\nexport const ArtworkSidebarCommercial: FC<\n  ArtworkSidebarCommercialProps\n> = props => {\n  const { mediator, user } = useContext(SystemContext)\n\n  return (\n    <ArtworkSidebarCommercialContainer\n      {...props}\n      mediator={mediator}\n      user={user}\n    />\n  )\n}\n\nexport const ArtworkSidebarCommercialFragmentContainer = createFragmentContainer(\n  ArtworkSidebarCommercial,\n  {\n    artwork: graphql`\n      fragment ArtworkSidebarCommercial_artwork on Artwork {\n        id\n        _id\n        is_for_sale\n        is_acquireable\n        is_inquireable\n        is_offerable\n        price\n        priceIncludesTaxDisplay\n        sale_message\n        shippingInfo\n        shippingOrigin\n        edition_sets {\n          id\n          __id\n          is_acquireable\n          is_offerable\n          sale_message\n          ...ArtworkSidebarSizeInfo_piece\n        }\n      }\n    `,\n  }\n)\n"],"file":"ArtworkSidebarCommercial.js"}