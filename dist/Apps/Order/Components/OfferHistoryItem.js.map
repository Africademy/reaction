{"version":3,"sources":["../../../../src/Apps/Order/Components/OfferHistoryItem.tsx"],"names":["OfferHistoryItem","order","totalListPrice","lastOffer","offers","others","previousOffers","edges","filter","id","node","fromParticipant","amount","note","length","map","offer","createdAt","Row","children","OfferHistoryItemFragmentContainer"],"mappings":"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","sourcesContent":["import { Flex, FlexProps, Sans, Serif, Spacer } from \"@artsy/palette\"\nimport { OfferHistoryItem_order } from \"__generated__/OfferHistoryItem_order.graphql\"\nimport {\n  StepSummaryItem,\n  StepSummaryItemProps,\n} from \"Components/v2/StepSummaryItem\"\nimport React, { HTMLProps } from \"react\"\nimport { createFragmentContainer, graphql } from \"react-relay\"\nimport { RevealButton } from \"./RevealButton\"\n\nconst OfferHistoryItem: React.SFC<\n  {\n    order: OfferHistoryItem_order\n  } & StepSummaryItemProps\n> = ({ order: { totalListPrice, lastOffer, offers }, ...others }) => {\n  const previousOffers = offers.edges.filter(\n    ({ node: { id } }) => id !== lastOffer.id\n  )\n\n  return (\n    <StepSummaryItem {...others}>\n      <Row>\n        <Serif size={[\"2\", \"3\"]} color=\"black100\" weight=\"semibold\">\n          {lastOffer.fromParticipant === \"SELLER\"\n            ? \"Seller's offer\"\n            : \"Your offer\"}\n        </Serif>\n        <Serif size={[\"2\", \"3\"]} color=\"black100\">\n          {lastOffer.amount}\n        </Serif>\n      </Row>\n      <Row>\n        <div />\n        <Sans size=\"2\" color=\"black60\">\n          List price: {totalListPrice}\n        </Sans>\n      </Row>\n      {lastOffer.note && (\n        <>\n          <Spacer mb={2} />\n          <Serif size={[\"2\", \"3\"]} color=\"black100\" weight=\"semibold\">\n            {lastOffer.fromParticipant === \"SELLER\"\n              ? \"Seller's note\"\n              : \"Your note\"}\n          </Serif>\n          <Serif size=\"2\" color=\"black60\">\n            {lastOffer.note}\n          </Serif>\n          <Spacer mb={1} />\n        </>\n      )}\n      {previousOffers.length > 0 && (\n        <>\n          <Spacer mb={2} />\n          <RevealButton buttonLabel=\"Show offer history\">\n            <Flex m={0} flexDirection=\"column\">\n              <Serif size={[\"2\", \"3\"]} color=\"black100\" weight=\"semibold\">\n                Offer history\n              </Serif>\n              {previousOffers.map(({ node: offer }) => (\n                <Row key={offer.id}>\n                  <Serif size={[\"2\", \"3\"]} color=\"black60\">\n                    {offer.fromParticipant === \"BUYER\" ? \"You\" : \"Seller\"}\n                    {` (${offer.createdAt})`}\n                  </Serif>\n                  <Serif size={[\"2\", \"3\"]} color=\"black60\">\n                    {offer.amount}\n                  </Serif>\n                </Row>\n              ))}\n            </Flex>\n          </RevealButton>\n        </>\n      )}\n    </StepSummaryItem>\n  )\n}\n\nconst Row: React.SFC<\n  // TODO: look into why a separate style prop is necessary here\n  FlexProps & { style?: HTMLProps<HTMLDivElement>[\"style\"] }\n> = ({ children, ...others }) => (\n  <Flex justifyContent=\"space-between\" alignItems=\"baseline\" {...others}>\n    {children}\n  </Flex>\n)\n\nexport const OfferHistoryItemFragmentContainer = createFragmentContainer(\n  OfferHistoryItem,\n  {\n    order: graphql`\n      fragment OfferHistoryItem_order on CommerceOrder {\n        ... on CommerceOfferOrder {\n          offers {\n            edges {\n              node {\n                id\n                amount(precision: 2)\n                createdAt(format: \"MMM D\")\n                fromParticipant\n              }\n            }\n          }\n          lastOffer {\n            id\n            fromParticipant\n            amount(precision: 2)\n            shippingTotal(precision: 2)\n            taxTotal(precision: 2)\n            note\n          }\n        }\n        totalListPrice(precision: 2)\n      }\n    `,\n  }\n)\n"],"file":"OfferHistoryItem.js"}