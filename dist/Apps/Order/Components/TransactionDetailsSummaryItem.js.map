{"version":3,"sources":["../../../../src/Apps/Order/Components/TransactionDetailsSummaryItem.tsx"],"names":["emDash","TransactionDetailsSummaryItem","order","props","mode","shippingTotal","offer","getOffer","taxTotal","buyerTotal","offerOverride","offerContextPrice","itemsTotal","isBuyerOffer","fromParticipant","amount","totalListPrice","lastOffer","note","showOfferNote","others","renderPriceEntry","shippingDisplayAmount","taxDisplayAmount","buyerTotalDisplayAmount","renderNoteEntry","useLastSubmittedOffer","myLastOffer","React","Component","Entry","label","value","final","SecondaryEntry","TransactionDetailsSummaryItemFragmentContainer"],"mappings":"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","sourcesContent":["import { TransactionDetailsSummaryItem_order } from \"__generated__/TransactionDetailsSummaryItem_order.graphql\"\nimport React from \"react\"\nimport { createFragmentContainer, graphql } from \"react-relay\"\n\nimport { Flex, Sans, Serif, Spacer } from \"@artsy/palette\"\nimport { StepSummaryItem, StepSummaryItemProps } from \"Components/v2\"\nimport { Omit } from \"lodash\"\n\nexport interface TransactionDetailsSummaryItemProps\n  extends Omit<StepSummaryItemProps, \"order\"> {\n  order: TransactionDetailsSummaryItem_order\n  offerOverride?: string | null\n  useLastSubmittedOffer?: boolean\n  offerContextPrice?: \"LIST_PRICE\" | \"LAST_OFFER\"\n  showOfferNote?: boolean\n}\n\nconst emDash = \"â€”\"\n\nexport class TransactionDetailsSummaryItem extends React.Component<\n  TransactionDetailsSummaryItemProps\n> {\n  static defaultProps: Partial<TransactionDetailsSummaryItemProps> = {\n    offerContextPrice: \"LIST_PRICE\",\n  }\n  render() {\n    const { showOfferNote, offerOverride, order, ...others } = this.props\n    return (\n      <StepSummaryItem {...others}>\n        {this.renderPriceEntry()}\n        <Spacer mb={2} />\n        <Entry label=\"Shipping\" value={this.shippingDisplayAmount()} />\n\n        <Entry label=\"Tax\" value={this.taxDisplayAmount()} />\n        <Spacer mb={2} />\n        <Entry label=\"Total\" value={this.buyerTotalDisplayAmount()} final />\n        {showOfferNote && order.mode === \"OFFER\" && this.renderNoteEntry()}\n      </StepSummaryItem>\n    )\n  }\n\n  getOffer(): TransactionDetailsSummaryItem_order[\"lastOffer\"] | null {\n    return this.props.useLastSubmittedOffer\n      ? this.props.order.lastOffer\n      : this.props.order.myLastOffer\n  }\n\n  shippingDisplayAmount = () => {\n    const { order } = this.props\n    switch (order.mode) {\n      case \"BUY\":\n        return order.shippingTotal || emDash\n      case \"OFFER\":\n        const offer = this.getOffer()\n        return (offer && offer.shippingTotal) || emDash\n    }\n  }\n\n  taxDisplayAmount = () => {\n    const { order } = this.props\n    switch (order.mode) {\n      case \"BUY\":\n        return order.taxTotal || emDash\n      case \"OFFER\":\n        const offer = this.getOffer()\n        return (offer && offer.taxTotal) || emDash\n    }\n  }\n\n  buyerTotalDisplayAmount = () => {\n    const { order } = this.props\n    switch (order.mode) {\n      case \"BUY\":\n        return order.buyerTotal\n      case \"OFFER\":\n        const offer = this.getOffer()\n        return offer && offer.buyerTotal\n    }\n  }\n\n  renderPriceEntry = () => {\n    const { order, offerOverride, offerContextPrice } = this.props\n    if (order.mode === \"BUY\") {\n      return <Entry label=\"Price\" value={order.itemsTotal} />\n    }\n    const offer = this.getOffer()\n    const isBuyerOffer =\n      offerOverride != null || !offer || offer.fromParticipant === \"BUYER\"\n\n    return (\n      <>\n        <Entry\n          label={isBuyerOffer ? \"Your offer\" : \"Seller's offer\"}\n          value={offerOverride || (offer && offer.amount) || emDash}\n        />\n        {offerContextPrice === \"LIST_PRICE\" ? (\n          <SecondaryEntry label=\"List price\" value={order.totalListPrice} />\n        ) : (\n          // show last offer\n          <SecondaryEntry\n            label={\n              order.lastOffer.fromParticipant === \"SELLER\"\n                ? \"Seller's offer\"\n                : \"Your offer\"\n            }\n            value={order.lastOffer.amount}\n          />\n        )}\n      </>\n    )\n  }\n\n  renderNoteEntry = () => {\n    const offer = this.getOffer()\n\n    if (offer.note) {\n      return (\n        <>\n          <Spacer mb={[2, 3]} />\n          <Serif size={[\"2\", \"3t\"]} weight=\"semibold\" color=\"black100\">\n            Your note\n          </Serif>\n          <Serif size={[\"2\", \"3t\"]} color=\"black60\">\n            {offer.note}\n          </Serif>\n        </>\n      )\n    }\n  }\n}\n\ninterface SecondaryEntryProps {\n  label: React.ReactNode\n  value: React.ReactNode\n}\n\ninterface EntryProps extends SecondaryEntryProps {\n  final?: boolean\n}\n\nconst Entry: React.SFC<EntryProps> = ({ label, value, final }) => (\n  <Flex justifyContent=\"space-between\" alignItems=\"baseline\">\n    <div>\n      <Serif size={[\"2\", \"3\"]} color=\"black60\">\n        {label}\n      </Serif>\n    </div>\n    <div>\n      <Serif\n        size={[\"2\", \"3\"]}\n        color={final ? \"black100\" : \"black60\"}\n        weight={final ? \"semibold\" : \"regular\"}\n      >\n        {value}\n      </Serif>\n    </div>\n  </Flex>\n)\n\nconst SecondaryEntry: React.SFC<SecondaryEntryProps> = ({ label, value }) => (\n  <Flex justifyContent=\"space-between\" alignItems=\"baseline\">\n    <div>\n      <Sans size=\"2\" color=\"black60\">\n        {label}\n      </Sans>\n    </div>\n    <div>\n      <Sans size=\"2\" color=\"black60\">\n        {value}\n      </Sans>\n    </div>\n  </Flex>\n)\n\ngraphql`\n  fragment TransactionDetailsSummaryItemOfferProperties on CommerceOffer {\n    id\n    amount(precision: 2)\n    amountCents\n    shippingTotal(precision: 2)\n    shippingTotalCents\n    taxTotal(precision: 2)\n    taxTotalCents\n    buyerTotal(precision: 2)\n    buyerTotalCents\n    fromParticipant\n    note\n  }\n`\n\nexport const TransactionDetailsSummaryItemFragmentContainer = createFragmentContainer(\n  TransactionDetailsSummaryItem,\n  {\n    order: graphql`\n      fragment TransactionDetailsSummaryItem_order on CommerceOrder {\n        __typename\n        mode\n        shippingTotal(precision: 2)\n        shippingTotalCents\n        taxTotal(precision: 2)\n        taxTotalCents\n        itemsTotal(precision: 2)\n        totalListPrice(precision: 2)\n        buyerTotal(precision: 2)\n        ... on CommerceOfferOrder {\n          lastOffer {\n            ...TransactionDetailsSummaryItemOfferProperties @relay(mask: false)\n          }\n          myLastOffer {\n            ...TransactionDetailsSummaryItemOfferProperties @relay(mask: false)\n          }\n        }\n      }\n    `,\n  }\n)\n"],"file":"TransactionDetailsSummaryItem.js"}