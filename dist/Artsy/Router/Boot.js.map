{"version":3,"sources":["../../../src/Artsy/Router/Boot.tsx"],"names":["GlobalStyles","Boot","dispatch","data","Events","postEvent","env","sd","NODE_ENV","process","Sentry","init","dsn","SENTRY_PUBLIC_DSN","props","children","context","headTags","contextProps","onlyMatchMediaQueries","themeProps","mediaQueries","React","Component","displayName","Grid"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeA;AACA;0BACyB,kC;IAAjBA,Y,uBAAAA,Y;;IASKC,I,WALZ,sBAAM,IAAN,EAAY;AACXC,EAAAA,QAAQ,EAAE,kBAAAC,IAAI,EAAI;AAChBC,oBAAOC,SAAP,CAAiBF,IAAjB;AACD;AAHU,CAAZ,C;;;;;;;;;;;;;wCAMqB;AAClB,UAAMG,GAAG,GAAGC,cAAGC,QAAH,IAAgBC,OAAO,CAACH,GAAR,IAAeG,OAAO,CAACH,GAAR,CAAYE,QAAvD;;AACA,UAAIF,GAAG,KAAK,YAAZ,EAA0B;AACxBI,QAAAA,MAAM,CAACC,IAAP,CAAY;AAAEC,UAAAA,GAAG,EAAEL,cAAGM;AAAV,SAAZ;AACD;AACF;;;6BAEQ;AAAA,wBACgD,KAAKC,KADrD;AAAA,UACCC,QADD,eACCA,QADD;AAAA,UACWC,OADX,eACWA,OADX;AAAA,6CACoBC,QADpB;AAAA,UACoBA,QADpB,qCAC+B,EAD/B;AAAA,UACsCH,KADtC;;AAEP,UAAMI,YAAY,qBACbJ,KADa,EAEbE,OAFa,CAAlB;;AAKA,aACE,6BAAC,4BAAD,QACE,6BAAC,uBAAD;AAAc,QAAA,QAAQ,EAAEC;AAAxB,SACE,6BAAC,kBAAD,QACE,6BAAC,KAAD,CAAO,qBAAP,EAAiCC,YAAjC,EACE,6BAAC,gCAAD;AAAsB,QAAA,SAAS,EAAEJ,KAAK,CAACK;AAAvC,SACE,6BAAC,8BAAD;AACE,QAAA,YAAY,EAAEC,oBAAWC,YAD3B;AAEE,QAAA,2BAA2B,EACzBP,KAAK,CAACK;AAHV,SAME,6BAAC,cAAD,QACE,6BAAC,aAAD;AAAM,QAAA,KAAK;AAAX,SACE,6BAAC,YAAD;AAAc,QAAA,yBAAyB;AAAvC,QADF,EAEGJ,QAFH,EAGGN,OAAO,CAACH,GAAR,CAAYE,QAAZ,KAAyB,aAAzB,IACC,6BAAC,0CAAD,OAJJ,CADF,CANF,CADF,CADF,CADF,CADF,CADF,CADF;AA4BD;;;;EA3CuBc,eAAMC,S,eA8ChC;;;AACAvB,YAAY,CAACwB,WAAb,GAA2B,cAA3B;AACAC,cAAKD,WAAL,GAAmB,MAAnB","sourcesContent":["import { Grid, injectGlobalStyles, Theme, themeProps } from \"@artsy/palette\"\nimport * as Sentry from \"@sentry/browser\"\nimport * as Artsy from \"Artsy\"\nimport { track } from \"Artsy/Analytics\"\nimport { ErrorBoundary } from \"Components/ErrorBoundary\"\nimport { RouteConfig } from \"found\"\nimport React from \"react\"\nimport { HeadProvider } from \"react-head\"\nimport { Environment } from \"relay-runtime\"\nimport { data as sd } from \"sharify\"\nimport { Provider as StateProvider } from \"unstated\"\nimport { BreakpointVisualizer } from \"Utils/BreakpointVisualizer\"\nimport Events from \"Utils/Events\"\n\nimport {\n  MatchingMediaQueries,\n  MediaContextProvider,\n  ResponsiveProvider,\n} from \"Utils/Responsive\"\n\nexport interface BootProps {\n  context: object\n  user: User\n  onlyMatchMediaQueries?: MatchingMediaQueries\n  relayEnvironment: Environment\n  routes: RouteConfig\n  headTags?: JSX.Element[]\n}\n\n// FIXME: When we update to latest @types/styled-components `suppressMultiMountWarning`\n// issue will be fixed\nconst { GlobalStyles } = injectGlobalStyles<{\n  suppressMultiMountWarning: boolean\n}>()\n\n@track(null, {\n  dispatch: data => {\n    Events.postEvent(data)\n  },\n})\nexport class Boot extends React.Component<BootProps> {\n  componentDidMount() {\n    const env = sd.NODE_ENV || (process.env && process.env.NODE_ENV)\n    if (env === \"production\") {\n      Sentry.init({ dsn: sd.SENTRY_PUBLIC_DSN })\n    }\n  }\n\n  render() {\n    const { children, context, headTags = [], ...props } = this.props\n    const contextProps = {\n      ...props,\n      ...context,\n    }\n\n    return (\n      <ErrorBoundary>\n        <HeadProvider headTags={headTags}>\n          <StateProvider>\n            <Artsy.SystemContextProvider {...contextProps}>\n              <MediaContextProvider onlyMatch={props.onlyMatchMediaQueries}>\n                <ResponsiveProvider\n                  mediaQueries={themeProps.mediaQueries}\n                  initialMatchingMediaQueries={\n                    props.onlyMatchMediaQueries as any\n                  }\n                >\n                  <Theme>\n                    <Grid fluid>\n                      <GlobalStyles suppressMultiMountWarning />\n                      {children}\n                      {process.env.NODE_ENV === \"development\" && (\n                        <BreakpointVisualizer />\n                      )}\n                    </Grid>\n                  </Theme>\n                </ResponsiveProvider>\n              </MediaContextProvider>\n            </Artsy.SystemContextProvider>\n          </StateProvider>\n        </HeadProvider>\n      </ErrorBoundary>\n    )\n  }\n}\n\n// Tests\nGlobalStyles.displayName = \"GlobalStyles\"\nGrid.displayName = \"Grid\"\n"],"file":"Boot.js"}