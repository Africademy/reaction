{"version":3,"sources":["../../../src/Components/Auction/AuctionRegistrationModal.tsx"],"names":["AuctionRegistrationModal","auction","onClose","onSubmit","show","setShow","acceptedConditions","setAcceptedConditions","error","setError","submitting","setSubmitting","closeModal","validate","handleSubmit","acceptedTerms","validateAndSubmit","name","value"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AAEA;;AACA;;;;;;;;;;;;AAuBO,IAAMA,wBAAyC,GAAG,SAA5CA,wBAA4C,OAInD;AAAA,MAHJC,OAGI,QAHJA,OAGI;AAAA,MAFJC,OAEI,QAFJA,OAEI;AAAA,MADJC,QACI,QADJA,QACI;;AAAA,kBACoB,qBAAS,IAAT,CADpB;AAAA;AAAA,MACGC,IADH;AAAA,MACSC,OADT;;AAAA,mBAEgD,qBAAS,KAAT,CAFhD;AAAA;AAAA,MAEGC,kBAFH;AAAA,MAEuBC,qBAFvB;;AAAA,mBAGsB,qBAAiB,EAAjB,CAHtB;AAAA;AAAA,MAGGC,KAHH;AAAA,MAGUC,QAHV;;AAAA,mBAIgC,qBAAS,KAAT,CAJhC;AAAA;AAAA,MAIGC,UAJH;AAAA,MAIeC,aAJf;;AAMJ,WAASC,UAAT,GAAsB;AACpBP,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD;;AAED,wBAAU,YAAM;AACd,QAAI,CAACD,IAAL,EAAW;AACTF,MAAAA,OAAO;AACR;AACF,GAJD,EAIG,CAACE,IAAD,CAJH;;AAMA,WAASS,QAAT,GAAoB;AAClB,QAAIP,kBAAJ,EAAwB;AACtBG,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACA,aAAO,IAAP;AACD,KAHD,MAGO;AACLA,MAAAA,QAAQ,CAAC,8BAAD,CAAR;AACA,aAAO,KAAP;AACD;AACF;;AAED,WAASK,YAAT,CAAsBC,aAAtB,EAA8C;AAC5CJ,IAAAA,aAAa,CAAC,IAAD,CAAb;AACAR,IAAAA,QAAQ,CAAC;AAAEQ,MAAAA,aAAa,EAAbA,aAAF;AAAiBF,MAAAA,QAAQ,EAARA,QAAjB;AAA2BR,MAAAA,OAAO,EAAPA,OAA3B;AAAoCc,MAAAA,aAAa,EAAbA;AAApC,KAAD,CAAR;AACD;;AAED,WAASC,iBAAT,GAA6B;AAC3B,QAAIH,QAAQ,EAAZ,EAAgB;AACdC,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACD;AACF;;AAED,SACE,6BAAC,cAAD;AAAO,IAAA,IAAI,EAAEV,IAAb;AAAmB,IAAA,OAAO,EAAEQ;AAA5B,KACE,6BAAC,YAAD;AAAK,IAAA,EAAE,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAT;AAAiB,IAAA,SAAS,EAAC;AAA3B,KACE,6BAAC,cAAD;AAAO,IAAA,IAAI,EAAC;AAAZ,sBAA8BX,OAAO,CAACgB,IAAtC,CADF,EAEE,6BAAC,cAAD;AAAO,IAAA,EAAE,EAAE,CAAX;AAAc,IAAA,IAAI,EAAC;AAAnB,6GAFF,EAME,6BAAC,aAAD;AAAM,IAAA,EAAE,EAAE,CAAV;AAAa,IAAA,aAAa,EAAC,QAA3B;AAAoC,IAAA,cAAc,EAAC;AAAnD,KACE,6BAAC,YAAD;AAAK,IAAA,EAAE,EAAC;AAAR,KACE,6BAAC,kDAAD;AACE,IAAA,QAAQ,EAAEX,kBADZ;AAEE,IAAA,QAAQ,EAAE,kBAAAY,KAAK;AAAA,aAAIX,qBAAqB,CAACW,KAAD,CAAzB;AAAA;AAFjB,IADF,CADF,EAOGV,KAAK,IACJ,6BAAC,aAAD;AAAM,IAAA,EAAE,EAAE,CAAV;AAAa,IAAA,KAAK,EAAC,QAAnB;AAA4B,IAAA,IAAI,EAAC;AAAjC,KACGA,KADH,CARJ,CANF,EAmBE,6BAAC,eAAD;AACE,IAAA,KAAK,MADP;AAEE,IAAA,OAAO,EAAEE,UAFX;AAGE,IAAA,KAAK,EAAC,MAHR;AAIE,IAAA,OAAO,EAAEM;AAJX,gBAnBF,CADF,CADF;AAgCD,CAzEM","sourcesContent":["import React, { useEffect, useState } from \"react\"\n\nimport { Box, Button, Flex, Modal, Sans, Serif } from \"@artsy/palette\"\nimport { ConditionsOfSaleCheckbox } from \"./ConditionsOfSaleCheckbox\"\n\n// For convenience even though sale is for now a single value\ninterface Sale {\n  name: string\n}\n\nexport type SubmitRegistrationHandler = (opts: {\n  setSubmitting: (isSubmitting: boolean) => void\n  setError: (message: string) => void\n  auction: Sale\n  acceptedTerms: boolean\n}) => void\n\ninterface Props {\n  /** The auction attributes */\n  auction: Sale\n  /** Any cleanup that needs to happen when the modal closes */\n  onClose: () => void\n  /** Handle a successful submission (commence registration) */\n  onSubmit: SubmitRegistrationHandler\n}\n\nexport const AuctionRegistrationModal: React.FC<Props> = ({\n  auction,\n  onClose,\n  onSubmit,\n}) => {\n  const [show, setShow] = useState(true)\n  const [acceptedConditions, setAcceptedConditions] = useState(false)\n  const [error, setError] = useState<string>(\"\")\n  const [submitting, setSubmitting] = useState(false)\n\n  function closeModal() {\n    setShow(false)\n  }\n\n  useEffect(() => {\n    if (!show) {\n      onClose()\n    }\n  }, [show])\n\n  function validate() {\n    if (acceptedConditions) {\n      setError(\"\")\n      return true\n    } else {\n      setError(\"You must agree to our terms.\")\n      return false\n    }\n  }\n\n  function handleSubmit(acceptedTerms: boolean) {\n    setSubmitting(true)\n    onSubmit({ setSubmitting, setError, auction, acceptedTerms })\n  }\n\n  function validateAndSubmit() {\n    if (validate()) {\n      handleSubmit(true)\n    }\n  }\n\n  return (\n    <Modal show={show} onClose={closeModal}>\n      <Box pt={[3, 0]} textAlign=\"center\">\n        <Serif size=\"6\">Register for {auction.name}</Serif>\n        <Serif my={3} size=\"4\">\n          Welcome back. To complete your registration, please confirm that you\n          agree to the Conditions of Sale.\n        </Serif>\n        <Flex my={4} flexDirection=\"column\" justifyContent=\"center\">\n          <Box mx=\"auto\">\n            <ConditionsOfSaleCheckbox\n              selected={acceptedConditions}\n              onSelect={value => setAcceptedConditions(value)}\n            />\n          </Box>\n          {error && (\n            <Sans mt={1} color=\"red100\" size=\"2\">\n              {error}\n            </Sans>\n          )}\n        </Flex>\n        <Button\n          block\n          loading={submitting}\n          width=\"100%\"\n          onClick={validateAndSubmit}\n        >\n          Register\n        </Button>\n      </Box>\n    </Modal>\n  )\n}\n"],"file":"AuctionRegistrationModal.js"}