{"version":3,"sources":["../../../../src/Components/NavBar/Menus/UserMenu.tsx"],"names":["UserMenu","trackEvent","SystemContext","mediator","user","trackClick","event","link","target","text","innerText","href","parentNode","getAttribute","action_type","AnalyticsSchema","ActionType","Click","context_module","ContextModule","HeaderUserDropdown","subject","destination_path","isAdmin","hasPartnerAccess","Boolean","has_partner_access","sd","ADMIN_URL","CMS_URL","preventDefault","authentication","logout"],"mappings":";;;;;;;;;AAAA;;AAEA;;AAYA;;AACA;;AACA;;AACA;;AACA;;;;AAEO,IAAMA,QAAkB,GAAG,SAArBA,QAAqB,GAAM;AAAA,qBACf,gCADe;AAAA,MAC9BC,UAD8B,gBAC9BA,UAD8B;;AAAA,oBAEX,uBAAWC,oBAAX,CAFW;AAAA,MAE9BC,QAF8B,eAE9BA,QAF8B;AAAA,MAEpBC,IAFoB,eAEpBA,IAFoB;;AAItC,MAAMC,UAAU,GAAG,SAAbA,UAAa,CAAAC,KAAK,EAAI;AAC1B,QAAMC,IAAI,GAAGD,KAAK,CAACE,MAAnB;AACA,QAAMC,IAAI,GAAGF,IAAI,CAACG,SAAlB;AACA,QAAMC,IAAI,GAAGJ,IAAI,CAACK,UAAL,CAAgBA,UAAhB,CAA2BC,YAA3B,CAAwC,MAAxC,CAAb;AAEAZ,IAAAA,UAAU,CAAC;AACTa,MAAAA,WAAW,EAAEC,uBAAgBC,UAAhB,CAA2BC,KAD/B;AAETC,MAAAA,cAAc,EAAEH,uBAAgBI,aAAhB,CAA8BC,kBAFrC;AAGTC,MAAAA,OAAO,EAAEZ,IAHA;AAITa,MAAAA,gBAAgB,EAAEX;AAJT,KAAD,CAAV;AAMD,GAXD;;AAaA,MAAMY,OAAO,GAAG,uBAAYnB,IAAZ,CAAhB;AACA,MAAMoB,gBAAgB,GAAGC,OAAO,CAACrB,IAAI,CAACsB,kBAAN,CAAhC;AAEA,SACE,6BAAC,aAAD;AAAM,IAAA,OAAO,EAAErB;AAAf,KACGkB,OAAO,IAAI,6BAAC,iBAAD;AAAU,IAAA,IAAI,EAAEI,cAAGC;AAAnB,aADd,EAEG,CAACL,OAAO,IAAIC,gBAAZ,KACC,6BAAC,iBAAD;AAAU,IAAA,IAAI,EAAEG,cAAGE;AAAnB,WAHJ,EAKG,CAACN,OAAO,IAAIC,gBAAZ,KACC,6BAAC,aAAD;AAAM,IAAA,KAAK,EAAC,MAAZ;AAAmB,IAAA,cAAc,EAAC,QAAlC;AAA2C,IAAA,EAAE,EAAE;AAA/C,KACE,6BAAC,YAAD;AAAK,IAAA,KAAK,EAAC;AAAX,KACE,6BAAC,kBAAD,OADF,CADF,CANJ,EAaE,6BAAC,iBAAD;AAAU,IAAA,IAAI,EAAC;AAAf,KACE,6BAAC,kBAAD;AAAW,IAAA,EAAE,EAAE;AAAf,IADF,qBAbF,EAgBE,6BAAC,iBAAD;AAAU,IAAA,IAAI,EAAC;AAAf,KACE,6BAAC,iBAAD;AAAU,IAAA,EAAE,EAAE;AAAd,IADF,uBAhBF,EAmBE,6BAAC,iBAAD;AAAU,IAAA,IAAI,EAAC;AAAf,KACE,6BAAC,qBAAD;AAAc,IAAA,EAAE,EAAE;AAAlB,IADF,cAnBF,EAsBE,6BAAC,iBAAD;AACE,IAAA,OAAO,EAAE,iBAAAlB,KAAK,EAAI;AAChBA,MAAAA,KAAK,CAACwB,cAAN,GADgB,CACO;;AACvBC,MAAAA,cAAc,CAACC,MAAf,CAAsB7B,QAAtB;AACD;AAJH,KAME,6BAAC,kBAAD;AAAW,IAAA,EAAE,EAAE;AAAf,IANF,aAtBF,CADF;AAiCD,CArDM","sourcesContent":["import React, { useContext } from \"react\"\n\nimport {\n  Box,\n  Flex,\n  HeartIcon,\n  Menu,\n  MenuItem,\n  PowerIcon,\n  Separator,\n  SettingsIcon,\n  SoloIcon,\n} from \"@artsy/palette\"\n\nimport { AnalyticsSchema, SystemContext } from \"Artsy\"\nimport { useTracking } from \"Artsy/Analytics/useTracking\"\nimport { data as sd } from \"sharify\"\nimport { userIsAdmin } from \"Utils/user\"\nimport * as authentication from \"../Utils/authentication\"\n\nexport const UserMenu: React.FC = () => {\n  const { trackEvent } = useTracking()\n  const { mediator, user } = useContext(SystemContext)\n\n  const trackClick = event => {\n    const link = event.target\n    const text = link.innerText\n    const href = link.parentNode.parentNode.getAttribute(\"href\")\n\n    trackEvent({\n      action_type: AnalyticsSchema.ActionType.Click,\n      context_module: AnalyticsSchema.ContextModule.HeaderUserDropdown,\n      subject: text,\n      destination_path: href,\n    })\n  }\n\n  const isAdmin = userIsAdmin(user)\n  const hasPartnerAccess = Boolean(user.has_partner_access)\n\n  return (\n    <Menu onClick={trackClick}>\n      {isAdmin && <MenuItem href={sd.ADMIN_URL}>Admin</MenuItem>}\n      {(isAdmin || hasPartnerAccess) && (\n        <MenuItem href={sd.CMS_URL}>CMS</MenuItem>\n      )}\n      {(isAdmin || hasPartnerAccess) && (\n        <Flex width=\"100%\" justifyContent=\"center\" my={1}>\n          <Box width=\"90%\">\n            <Separator />\n          </Box>\n        </Flex>\n      )}\n\n      <MenuItem href=\"/user/saves\">\n        <HeartIcon mr={1} /> Saves & Follows\n      </MenuItem>\n      <MenuItem href=\"/profile/edit\">\n        <SoloIcon mr={1} /> Collector Profile\n      </MenuItem>\n      <MenuItem href=\"/user/edit\">\n        <SettingsIcon mr={1} /> Settings\n      </MenuItem>\n      <MenuItem\n        onClick={event => {\n          event.preventDefault() // `href` is only for tracking purposes\n          authentication.logout(mediator)\n        }}\n      >\n        <PowerIcon mr={1} /> Log out\n      </MenuItem>\n    </Menu>\n  )\n}\n"],"file":"UserMenu.js"}