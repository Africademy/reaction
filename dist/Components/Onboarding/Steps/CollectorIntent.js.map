{"version":3,"sources":["../../../../src/Components/Onboarding/Steps/CollectorIntent.tsx"],"names":["OptionsContainer","styled","div","Colors","grayRegular","media","sm","CollectorIntentComponent","props","index","selectedOptions","Object","assign","state","setState","intents","values","intentEnum","filter","_","relayEnvironment","mutation","variables","input","selectedIntents","onNextButtonPressed","options","keys","map","text","onOptionSelected","bind","submit","length","MultiButtonState","Highlighted","Default","React","Component","CollectorIntent","slug"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAMA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,gBAAgB,GAAGC,0BAAOC,GAAV;AAAA;AAAA;AAAA,yFAISC,gBAAOC,WAJhB,EAMlBC,eAAMC,EANY,oBAAtB;;IAmBaC,wB;;;;;AAYX,oCAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,kGAAMA,KAAN;;AADiB,uEAQA,UAAAC,KAAK,EAAI;AAC1B,UAAMC,eAAe,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,MAAKC,KAAL,CAAWH,eAA7B,CAAxB;AACAA,MAAAA,eAAe,CAACD,KAAD,CAAf,GAAyB,CAACC,eAAe,CAACD,KAAD,CAAzC;;AAEA,YAAKK,QAAL,CAAc;AACZJ,QAAAA,eAAe,EAAfA;AADY,OAAd;AAGD,KAfkB;;AAGjB,UAAKG,KAAL,GAAa;AACXH,MAAAA,eAAe,EAAE;AADN,KAAb;AAHiB;AAMlB;;;;sCAWiB;AAAA;;AAChB,UAAMK,OAAO,GAAGJ,MAAM,CAACK,MAAP,CAAcT,wBAAwB,CAACU,UAAvC,EAAmDC,MAAnD,CACd,UAACC,CAAD,EAAIV,KAAJ;AAAA,eAAc,MAAI,CAACI,KAAL,CAAWH,eAAX,CAA2BD,KAA3B,CAAd;AAAA,OADc,CAAhB;AAIA,aAAOM,OAAP;AACD;;;6BAEQ;AACP,sCACE,KAAKP,KAAL,CAAWY,gBADb,EAEE;AACEC,QAAAA,QAAQ;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,UADV;AAUEC,QAAAA,SAAS,EAAE;AACTC,UAAAA,KAAK,EAAE;AACLR,YAAAA,OAAO,EAAE,KAAKS,eAAL;AADJ;AADE;AAVb,OAFF;AAoBA,WAAKhB,KAAL,CAAWiB,mBAAX;AACD;;;6BAEQ;AAAA;;AACP,UAAMC,OAAO,GAAGf,MAAM,CAACgB,IAAP,CAAYpB,wBAAwB,CAACU,UAArC,EAAiDW,GAAjD,CACd,UAACC,IAAD,EAAOpB,KAAP;AAAA,eACE,6BAAC,yBAAD;AACE,UAAA,GAAG,EAAEA,KADP;AAEE,UAAA,IAAI,EAAEoB,IAFR;AAGE,UAAA,QAAQ,EAAE,MAAI,CAACC,gBAAL,CAAsBC,IAAtB,CAA2B,MAA3B,EAAiCtB,KAAjC,CAHZ;AAIE,UAAA,QAAQ,EAAE,MAAI,CAACI,KAAL,CAAWH,eAAX,CAA2BD,KAA3B;AAJZ,UADF;AAAA,OADc,CAAhB;AAWA,aACE,6BAAC,cAAD;AACE,QAAA,KAAK,EAAC,kCADR;AAEE,QAAA,QAAQ,EAAC,uBAFX;AAGE,QAAA,mBAAmB,EAAE,KAAKuB,MAAL,CAAYD,IAAZ,CAAiB,IAAjB,CAHvB;AAIE,QAAA,WAAW,EACT,KAAKP,eAAL,GAAuBS,MAAvB,GAAgC,CAAhC,GACIC,mCAAiBC,WADrB,GAEID,mCAAiBE;AAPzB,SAUE,6BAAC,gBAAD,QAAmBV,OAAnB,CAVF,CADF;AAcD;;;;EAvF2CW,eAAMC,S;;;;gBAAvC/B,wB,UACgB,W;;gBADhBA,wB,gBAGS;AAClB,sBAAoB,oBADF;AAElB,uBAAqB,qBAFH;AAGlB,yBAAuB,qBAHL;AAIlB,qBAAmB,iBAJD;AAKlB,oCAAkC,mBALhB;AAMlB,0BAAwB;AANN,C;;AAuFtB,IAAMgC,eAAe,GAAG,8BAAkBhC,wBAAlB,CAAxB,C,CACA;;AACAgC,eAAe,CAAC,MAAD,CAAf,GAA0BhC,wBAAwB,CAACiC,IAAnD;eAEeD,e","sourcesContent":["import React from \"react\"\nimport { commitMutation, graphql } from \"react-relay\"\nimport styled from \"styled-components\"\n\nimport {\n  CollectorIntentUpdateCollectorProfileMutation,\n  Intents,\n} from \"__generated__/CollectorIntentUpdateCollectorProfileMutation.graphql\"\nimport { SystemContextProps, withSystemContext } from \"Artsy\"\nimport Colors from \"../../../Assets/Colors\"\nimport { MultiButtonState } from \"../../Buttons/MultiStateButton\"\nimport { media } from \"../../Helpers\"\nimport SelectableToggle from \"../SelectableToggle\"\nimport { StepProps } from \"../Types\"\nimport { Layout } from \"./Layout\"\n\nconst OptionsContainer = styled.div`\n  width: 450px;\n  margin: 0 auto 100px;\n  &:last-child {\n    border-bottom: 1px solid ${Colors.grayRegular};\n  }\n  ${media.sm`\n    width: 100%;\n    margin-bottom: 20px;\n  `};\n`\n\ntype Props = StepProps & SystemContextProps\n\ninterface State {\n  selectedOptions: { [option: string]: boolean }\n  error?: string\n}\n\nexport class CollectorIntentComponent extends React.Component<Props, State> {\n  static slug: \"interests\" = \"interests\"\n\n  static intentEnum = {\n    \"buy art & design\": \"BUY_ART_AND_DESIGN\",\n    \"sell art & design\": \"SELL_ART_AND_DESIGN\",\n    \"research art prices\": \"RESEARCH_ART_PRICES\",\n    \"learn about art\": \"LEARN_ABOUT_ART\",\n    \"find out about new exhibitions\": \"FIND_ART_EXHIBITS\",\n    \"read art market news\": \"READ_ART_MARKET_NEWS\",\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      selectedOptions: {},\n    }\n  }\n\n  onOptionSelected = index => {\n    const selectedOptions = Object.assign({}, this.state.selectedOptions)\n    selectedOptions[index] = !selectedOptions[index]\n\n    this.setState({\n      selectedOptions,\n    })\n  }\n\n  selectedIntents() {\n    const intents = Object.values(CollectorIntentComponent.intentEnum).filter(\n      (_, index) => this.state.selectedOptions[index]\n    ) as Intents[]\n\n    return intents\n  }\n\n  submit() {\n    commitMutation<CollectorIntentUpdateCollectorProfileMutation>(\n      this.props.relayEnvironment,\n      {\n        mutation: graphql`\n          mutation CollectorIntentUpdateCollectorProfileMutation(\n            $input: UpdateCollectorProfileInput!\n          ) {\n            updateCollectorProfile(input: $input) {\n              intents\n            }\n          }\n        `,\n        variables: {\n          input: {\n            intents: this.selectedIntents(),\n          },\n        },\n      }\n    )\n\n    this.props.onNextButtonPressed()\n  }\n\n  render() {\n    const options = Object.keys(CollectorIntentComponent.intentEnum).map(\n      (text, index) => (\n        <SelectableToggle\n          key={index}\n          text={text}\n          onSelect={this.onOptionSelected.bind(this, index)}\n          selected={this.state.selectedOptions[index]}\n        />\n      )\n    )\n\n    return (\n      <Layout\n        title=\"How would you like to use Artsy?\"\n        subtitle=\"Select all that apply\"\n        onNextButtonPressed={this.submit.bind(this)}\n        buttonState={\n          this.selectedIntents().length > 0\n            ? MultiButtonState.Highlighted\n            : MultiButtonState.Default\n        }\n      >\n        <OptionsContainer>{options}</OptionsContainer>\n      </Layout>\n    )\n  }\n}\n\nconst CollectorIntent = withSystemContext(CollectorIntentComponent)\n// tslint:disable:no-string-literal\nCollectorIntent[\"slug\"] = CollectorIntentComponent.slug\n\nexport default CollectorIntent\n"],"file":"CollectorIntent.js"}