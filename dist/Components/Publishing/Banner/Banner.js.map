{"version":3,"sources":["../../../../src/Components/Publishing/Banner/Banner.tsx"],"names":["CtaCopy","BannerWrapper","showCtaBanner","newScrollPosition","window","scrollY","state","lastScrollPosition","setState","addEventListener","handleScroll","props","article","layout","slug","copy","news","default","backgroundColor","textColor","qs","stringify","action","intent","trigger","contextModule","Component"],"mappings":";;;;;;;;;;;;;;;;;;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;IAOYA,O;;;WAAAA,O;AAAAA,EAAAA,O;AAAAA,EAAAA,O;GAAAA,O,uBAAAA,O;;IAKCC,a;;;;;;;;;;;;;;;;;;4DACH;AACNC,MAAAA,aAAa,EAAE;AADT,K;;yEAGqB,C;;;;;;;mCAEd;AACb,UAAMC,iBAAiB,GAAGC,MAAM,CAACC,OAAjC;AACA,UAAIH,aAAa,GAAG,KAAKI,KAAL,CAAWJ,aAA/B;;AAEA,UAAIC,iBAAiB,IAAI,KAAKI,kBAA9B,EAAkD;AAChD;AACA,YAAI,KAAKD,KAAL,CAAWJ,aAAf,EAA8B;AAC5BA,UAAAA,aAAa,GAAG,KAAhB;AACD;AACF,OALD,MAKO;AACL;AACA,YAAI,CAAC,KAAKI,KAAL,CAAWJ,aAAhB,EAA+B;AAC7BA,UAAAA,aAAa,GAAG,IAAhB;AACD;AACF;;AAED,UAAI,KAAKI,KAAL,CAAWJ,aAAX,KAA6BA,aAAjC,EAAgD;AAC9C,aAAKM,QAAL,CAAc;AAAEN,UAAAA,aAAa,EAAbA;AAAF,SAAd;AACD;;AACD,WAAKK,kBAAL,GAA0BJ,iBAA1B;AACD;;;wCAEmB;AAAA;;AAClB,UAAIC,MAAJ,EAAY;AACVA,QAAAA,MAAM,CAACK,gBAAP,CAAwB,QAAxB,EAAkC,wBAAS;AAAA,iBAAM,MAAI,CAACC,YAAL,EAAN;AAAA,SAAT,EAAoC,EAApC,CAAlC;AACD;AACF;;;6BAEQ;AAAA,gCACkB,KAAKC,KAAL,CAAWC,OAD7B;AAAA,UACCC,MADD,uBACCA,MADD;AAAA,UACSC,IADT,uBACSA,IADT;AAEP,UAAMC,IAAI,GAAGF,MAAM,KAAK,MAAX,GAAoBb,OAAO,CAACgB,IAA5B,GAAmChB,OAAO,CAACiB,OAAxD;AACA,UAAMC,eAAe,GAAGL,MAAM,KAAK,OAAX,GAAqB,OAArB,GAA+B,OAAvD;AACA,UAAMM,SAAS,GAAGN,MAAM,KAAK,OAAX,GAAqB,OAArB,GAA+B,OAAjD;AAEA,aACE,6BAAC,kCAAD;AACE,QAAA,IAAI,qBAAcO,qBAAGC,SAAH,CAAa;AAC7BC,UAAAA,MAAM,EAAE,iBADqB;AAE7BC,UAAAA,MAAM,EAAE,kBAFqB;AAG7BC,UAAAA,OAAO,EAAE,OAHoB;AAI7BC,UAAAA,aAAa,EAAE,yBAJc;AAK7B,yBAAe,mCAAmBX,IAAnB;AALc,SAAb,CAAd,CADN;AAQE,QAAA,MAAM,EAAC,MART;AASE,QAAA,IAAI,EAAEC,IATR;AAUE,QAAA,QAAQ,EAAC,QAVX;AAWE,QAAA,SAAS,EAAEI,SAXb;AAYE,QAAA,eAAe,EAAED,eAZnB;AAaE,QAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWJ;AAbnB,QADF;AAiBD;;;;EAzDgCwB,gB","sourcesContent":["import { debounce } from \"lodash\"\nimport qs from \"querystring\"\nimport React, { Component } from \"react\"\nimport { MinimalCtaBanner } from \"../../MinimalCtaBanner\"\nimport { getArticleFullHref } from \"../Constants\"\nimport { ArticleData } from \"../Typings\"\n\nexport interface State {\n  showCtaBanner: boolean\n}\n\nexport enum CtaCopy {\n  news = \"Sign up for the best in art world news\",\n  default = \"Sign up to get our best stories everyday\",\n}\n\nexport class BannerWrapper extends Component<{ article: ArticleData }, State> {\n  state = {\n    showCtaBanner: false,\n  }\n  lastScrollPosition: number = 0\n\n  handleScroll() {\n    const newScrollPosition = window.scrollY\n    let showCtaBanner = this.state.showCtaBanner\n\n    if (newScrollPosition <= this.lastScrollPosition) {\n      // scrolling up the page\n      if (this.state.showCtaBanner) {\n        showCtaBanner = false\n      }\n    } else {\n      // scrolling down the page\n      if (!this.state.showCtaBanner) {\n        showCtaBanner = true\n      }\n    }\n\n    if (this.state.showCtaBanner !== showCtaBanner) {\n      this.setState({ showCtaBanner })\n    }\n    this.lastScrollPosition = newScrollPosition\n  }\n\n  componentDidMount() {\n    if (window) {\n      window.addEventListener(\"scroll\", debounce(() => this.handleScroll(), 10))\n    }\n  }\n\n  render() {\n    const { layout, slug } = this.props.article\n    const copy = layout === \"news\" ? CtaCopy.news : CtaCopy.default\n    const backgroundColor = layout === \"video\" ? \"white\" : \"black\"\n    const textColor = layout === \"video\" ? \"black\" : \"white\"\n\n    return (\n      <MinimalCtaBanner\n        href={`/sign_up?${qs.stringify({\n          action: \"editorialSignup\",\n          intent: \"viewed editorial\",\n          trigger: \"click\",\n          contextModule: \"auth minimal cta banner\",\n          \"redirect-to\": getArticleFullHref(slug),\n        })}`}\n        height=\"55px\"\n        copy={copy}\n        position=\"bottom\"\n        textColor={textColor}\n        backgroundColor={backgroundColor}\n        show={this.state.showCtaBanner}\n      />\n    )\n  }\n}\n"],"file":"Banner.js"}