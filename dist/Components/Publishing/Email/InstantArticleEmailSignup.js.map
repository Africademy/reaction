{"version":3,"sources":["../../../../src/Components/Publishing/Email/InstantArticleEmailSignup.tsx"],"names":["InstantArticleEmailSignup","props","setState","disabled","state","value","match","EMAIL_REGEX","request","post","signupUrl","send","email","set","end","err","res","flashMessage","message","error","setTimeout","e","target","onInputChange","length","onClick","React","Component","input","styled","Input","borderedInput","isError","Colors","redMedium","isReadOnly","Fonts","unica","InstantArticleEmailContainer","div","grayRegular","Title","garamond","Subtitle","avantgarde","StyledButton","InvertedButton","Form"],"mappings":"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","sourcesContent":["import * as Fonts from \"Assets/Fonts\"\nimport React from \"react\"\nimport styled, { StyledFunction } from \"styled-components\"\nimport request from \"superagent\"\nimport Colors from \"../../../Assets/Colors\"\nimport InvertedButton from \"../../Buttons/Inverted\"\nimport { borderedInput } from \"../../Mixins\"\nimport { EMAIL_REGEX } from \"../Constants\"\n\ninterface EmailProps {\n  signupUrl: string\n}\n\ninterface EmailState {\n  value: string\n  error: boolean\n  disabled: boolean\n  message: string\n}\n\ninterface InputProps {\n  isError: boolean\n  isReadOnly: boolean\n}\n\nexport class InstantArticleEmailSignup extends React.Component<\n  EmailProps,\n  EmailState\n> {\n  constructor(props) {\n    super(props)\n    this.state = {\n      value: \"\",\n      error: false,\n      disabled: false,\n      message: \"\",\n    }\n  }\n\n  onClick = () => {\n    this.setState({ disabled: true })\n    if (this.state.value.match(EMAIL_REGEX)) {\n      request\n        .post(this.props.signupUrl)\n        .send({ email: this.state.value })\n        .set(\"accept\", \"json\")\n        .end((err, res) => {\n          if (err) {\n            this.flashMessage(\"Error. Please try again\", true)\n          } else {\n            this.flashMessage(\"Thank you!\", false)\n          }\n        })\n    } else {\n      this.flashMessage(\"Invalid Email... Please try again\", true)\n    }\n  }\n\n  flashMessage = (message, error) => {\n    this.setState({ message, error })\n    setTimeout(() => {\n      this.setState({ message: \"\", disabled: false, error: false })\n    }, 2000)\n  }\n\n  onInputChange = e => {\n    this.setState({ value: e.target.value, error: null })\n  }\n\n  render() {\n    return (\n      <InstantArticleEmailContainer>\n        <Subtitle>The Daily Editorial Newsletter</Subtitle>\n        <Title>The latest art-world news and stories in your inbox</Title>\n        <Form>\n          <Input\n            type=\"email\"\n            placeholder=\"Enter Your Email...\"\n            onChange={this.onInputChange}\n            value={this.state.message || this.state.value}\n            readOnly={this.state.message.length > 0}\n            isError={this.state.error}\n            isReadOnly={this.state.message.length > 0}\n          />\n          <StyledButton disabled={this.state.disabled} onClick={this.onClick}>\n            Subscribe\n          </StyledButton>\n        </Form>\n      </InstantArticleEmailContainer>\n    )\n  }\n}\n\nconst input: StyledFunction<InputProps & React.HTMLProps<HTMLInputElement>> =\n  styled.input\nconst Input = input`\n  ${borderedInput}\n  width: 100%;\n  border-width: 1px;\n  color: ${props => (props.isError ? Colors.redMedium : \"black\")};\n  ${props => (props.isReadOnly ? Fonts.unica(\"s16\") : \"\")}\n`\nconst InstantArticleEmailContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-width: 500px;\n  padding: 30px 0;\n  margin: 0 20px;\n  border-top: 1px solid ${Colors.grayRegular};\n  border-bottom: 1px solid ${Colors.grayRegular};\n`\nconst Title = styled.div`\n  ${Fonts.garamond(\"s23\")};\n  margin-bottom: 30px;\n`\nconst Subtitle = styled.div`\n  ${Fonts.avantgarde(\"s11\")};\n  margin-bottom: 10px;\n`\nconst StyledButton = styled(InvertedButton)`\n  border-radius: 2px;\n  height: 30px;\n  width: 80px;\n  margin-left: -100px;\n  ${Fonts.avantgarde(\"s11\")};\n`\nconst Form = styled.div`\n  display: flex;\n`\n"],"file":"InstantArticleEmailSignup.js"}