{"version":3,"sources":["../../../../src/Components/Publishing/Layouts/StandardLayout.tsx"],"names":["StandardLayout","props","article","layout","slug","infiniteScrollEntrySlug","referrer","undefined","action_type","Schema","ActionType","Click","context_module","ContextModule","ReadMore","destination_path","subject","Subject","state","isTruncated","setState","isMobileAd","isSuper","AdUnit","Mobile_InContentMR1","Desktop_RightRail1","AdDimension","adDimension","Desktop_TopLeaderboard","emailSignupUrl","isMobile","relatedArticlesForCanvas","relatedArticlesForPanel","showTooltips","showCollectionsRail","seriesArticle","seriesOrSuper","xs","sm","md","Boolean","sideRailDisplayAd","renderSideRailDisplayAd","renderTopRailDisplayAd","removeTruncation","bind","React","Component","StandardLayoutParent","styled","div","pMedia","ArticleWrapper","attrs","isInfiniteScroll","StandardLayoutContainer"],"mappings":"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","sourcesContent":["import { color, space } from \"@artsy/palette\"\nimport { track } from \"Artsy/Analytics\"\nimport * as Schema from \"Artsy/Analytics/Schema\"\nimport { getEditorialHref } from \"Components/Publishing/Constants\"\nimport { DisplayAd } from \"Components/Publishing/Display/DisplayAd\"\nimport { targetingData } from \"Components/Publishing/Display/DisplayTargeting\"\nimport { AdDimension, AdUnit } from \"Components/Publishing/Typings\"\nimport React from \"react\"\nimport styled from \"styled-components\"\nimport { Responsive } from \"Utils/Responsive\"\nimport { pMedia } from \"../../Helpers\"\nimport { ArticleProps } from \"../Article\"\nimport { Header } from \"../Header/Header\"\nimport { ReadMoreButton } from \"../ReadMore/ReadMoreButton\"\nimport { ReadMoreWrapper } from \"../ReadMore/ReadMoreWrapper\"\nimport { Sections } from \"../Sections/Sections\"\nimport { CanvasFooter } from \"./Components/CanvasFooter\"\nimport { Sidebar } from \"./Components/Sidebar\"\n\ninterface ArticleState {\n  isTruncated: boolean\n}\n\n@track()\nexport class StandardLayout extends React.Component<\n  ArticleProps,\n  ArticleState\n> {\n  static defaultProps = {\n    isMobile: false,\n    isSuper: false,\n    article: {},\n    isTruncated: false,\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isTruncated: props.isTruncated || false,\n    }\n  }\n\n  @track<ArticleProps>(props => {\n    // Track here and on ReadMoreButton so pageview & action both fire\n    const {\n      article: { layout, slug },\n      infiniteScrollEntrySlug,\n    } = props\n    const referrer = infiniteScrollEntrySlug\n      ? `/article/${infiniteScrollEntrySlug}`\n      : undefined\n\n    return {\n      action_type: Schema.ActionType.Click,\n      context_module: Schema.ContextModule.ReadMore,\n      destination_path: getEditorialHref(layout, slug),\n      subject: Schema.Subject.ReadMore,\n      referrer,\n    }\n  })\n  removeTruncation() {\n    this.setState({ isTruncated: false })\n  }\n\n  renderSideRailDisplayAd(isMobileAd: boolean) {\n    const { article, isSuper } = this.props\n\n    if (isSuper) {\n      return\n    }\n\n    return (\n      <DisplayAd\n        adUnit={\n          isMobileAd ? AdUnit.Mobile_InContentMR1 : AdUnit.Desktop_RightRail1\n        }\n        adDimension={\n          isMobileAd\n            ? AdDimension.Mobile_InContentMR1\n            : AdDimension.Desktop_RightRail1\n        }\n        targetingData={targetingData(article, \"article\")}\n      />\n    )\n  }\n\n  renderTopRailDisplayAd(isMobileAd: boolean) {\n    const { article, isSuper } = this.props\n    const adDimension = isMobileAd\n      ? AdDimension.Mobile_InContentMR1\n      : AdDimension.Desktop_TopLeaderboard\n\n    if (isSuper) {\n      return\n    }\n\n    return (\n      <DisplayAd\n        adUnit={\n          isMobileAd\n            ? AdUnit.Mobile_InContentMR1\n            : AdUnit.Desktop_TopLeaderboard\n        }\n        adDimension={adDimension}\n        targetingData={targetingData(article, \"article\")}\n      />\n    )\n  }\n\n  render() {\n    const {\n      article,\n      emailSignupUrl,\n      infiniteScrollEntrySlug,\n      isMobile,\n      relatedArticlesForCanvas,\n      relatedArticlesForPanel,\n      showTooltips,\n      showCollectionsRail,\n      isSuper,\n    } = this.props\n\n    const { isTruncated } = this.state\n    const { seriesArticle } = article\n    const seriesOrSuper = isSuper || seriesArticle\n\n    return (\n      <Responsive>\n        {({ xs, sm, md }) => {\n          const isMobileAd = Boolean(isMobile || xs || sm || md)\n          const sideRailDisplayAd = () => (\n            <>{this.renderSideRailDisplayAd(isMobileAd)}</>\n          )\n\n          return (\n            <ArticleWrapper isInfiniteScroll={this.props.isTruncated}>\n              {this.renderTopRailDisplayAd(isMobileAd)}\n\n              <ReadMoreWrapper\n                isTruncated={isTruncated}\n                hideButton={() => this.setState({ isTruncated: false })}\n              >\n                <Header article={article} />\n\n                <StandardLayoutParent>\n                  <StandardLayoutContainer>\n                    <Sections\n                      DisplayPanel={sideRailDisplayAd}\n                      article={article}\n                      isMobile={isMobile}\n                      showTooltips={showTooltips}\n                    />\n                    <Sidebar\n                      emailSignupUrl={emailSignupUrl}\n                      DisplayPanel={sideRailDisplayAd}\n                      relatedArticlesForPanel={relatedArticlesForPanel}\n                    />\n                  </StandardLayoutContainer>\n                </StandardLayoutParent>\n              </ReadMoreWrapper>\n\n              {isTruncated && (\n                <ReadMoreButton\n                  onClick={this.removeTruncation.bind(this)}\n                  referrer={`/article/${infiniteScrollEntrySlug}`}\n                />\n              )}\n\n              {relatedArticlesForCanvas && !seriesOrSuper && (\n                <CanvasFooter\n                  article={article}\n                  relatedArticles={relatedArticlesForCanvas}\n                  showCollectionsRail={showCollectionsRail}\n                />\n              )}\n            </ArticleWrapper>\n          )\n        }}\n      </Responsive>\n    )\n  }\n}\n\nexport const StandardLayoutParent = styled.div`\n  margin: 0 40px 100px 40px;\n  ${pMedia.sm`\n    margin: 0 0 100px 0;\n  `};\n`\n\nconst ArticleWrapper = styled.div.attrs<{ isInfiniteScroll?: boolean }>({})`\n  ${props =>\n    props.isInfiniteScroll &&\n    `\n    padding-top: ${space(4)}px;\n    border-top: 1px solid ${color(\"black10\")};\n  `};\n`\n\nconst StandardLayoutContainer = styled.div`\n  max-width: 1250px;\n  display: flex;\n  margin: auto;\n  justify-content: space-between;\n`\n"],"file":"StandardLayout.js"}