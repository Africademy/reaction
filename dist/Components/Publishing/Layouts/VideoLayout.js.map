{"version":3,"sources":["../../../../src/Components/Publishing/Layouts/VideoLayout.tsx"],"names":["VideoLayout","props","page","entity_type","entity_id","article","id","dispatch","data","Events","postEvent","isPlaying","hideCover","setState","setTimeout","setHideCover","bind","state","isMobile","relatedArticles","media","seriesArticle","sponsor","isSponsored","seriesLink","slug","adDimension","AdDimension","Mobile_SponsoredSeriesLandingPageAndVideoPage_Bottom","Desktop_SponsoredSeriesLandingPageAndVideoPage_LeaderboardBottom","url","title","onPlayToggle","playVideo","AdUnit","Component","VideoLayoutContainer","styled","div","NavContainer","VideoPlayerContainer","VideoContainer"],"mappings":"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","sourcesContent":["import { Box } from \"@artsy/palette\"\nimport { getEditorialHref } from \"Components/Publishing/Constants\"\nimport { DisplayAd } from \"Components/Publishing/Display/DisplayAd\"\nimport { targetingData } from \"Components/Publishing/Display/DisplayTargeting\"\nimport { Nav, NavContainer } from \"Components/Publishing/Nav/Nav\"\nimport { ArticleCardsBlock } from \"Components/Publishing/RelatedArticles/ArticleCards/Block\"\nimport { AdDimension, AdUnit, ArticleData } from \"Components/Publishing/Typings\"\nimport { isEditorialSponsored } from \"Components/Publishing/utils/Sponsored\"\nimport {\n  VideoContainer,\n  VideoPlayer,\n} from \"Components/Publishing/Video/Player/VideoPlayer\"\nimport { VideoAbout } from \"Components/Publishing/Video/VideoAbout\"\nimport { VideoCover } from \"Components/Publishing/Video/VideoCover\"\nimport React, { Component } from \"react\"\nimport track from \"react-tracking\"\nimport styled from \"styled-components\"\nimport Events from \"Utils/Events\"\n\ninterface Props {\n  article: ArticleData\n  seriesArticle?: ArticleData\n  relatedArticles?: any\n  isMobile?: boolean\n}\n\ninterface State {\n  isPlaying: boolean\n  hideCover: boolean\n}\n\n@track(\n  props => {\n    return {\n      page: \"Article\",\n      entity_type: \"article\",\n      entity_id: props.article.id,\n    }\n  },\n  {\n    dispatch: data => Events.postEvent(data),\n  }\n)\nexport class VideoLayout extends Component<Props, State> {\n  state = {\n    isPlaying: false,\n    hideCover: false,\n  }\n\n  playVideo = () => {\n    this.setState({\n      isPlaying: true,\n      hideCover: true,\n    })\n  }\n\n  onPlayToggle = isPlaying => {\n    if (!isPlaying) {\n      this.setState({\n        isPlaying,\n      })\n      setTimeout(this.setHideCover.bind(this), 30000)\n    } else {\n      this.setState({\n        isPlaying,\n        hideCover: true,\n      })\n    }\n  }\n\n  setHideCover = () => {\n    if (!this.state.isPlaying) {\n      this.setState({\n        hideCover: false,\n      })\n    }\n  }\n\n  render() {\n    const { article, isMobile, relatedArticles } = this.props\n    const { media, seriesArticle } = article\n    const sponsor = seriesArticle ? seriesArticle.sponsor : article.sponsor\n    const isSponsored = isEditorialSponsored(sponsor)\n    const seriesLink =\n      seriesArticle && getEditorialHref(\"series\", seriesArticle.slug)\n    const adDimension = isMobile\n      ? AdDimension.Mobile_SponsoredSeriesLandingPageAndVideoPage_Bottom\n      : AdDimension.Desktop_SponsoredSeriesLandingPageAndVideoPage_LeaderboardBottom\n\n    return (\n      <VideoLayoutContainer>\n        <Nav transparent sponsor={sponsor} canFix={false} />\n        <VideoPlayerContainer>\n          {media.url && (\n            <VideoPlayer\n              url={media.url}\n              title={media.title}\n              forcePlay={this.state.isPlaying}\n              notifyPlayToggle={this.onPlayToggle}\n            />\n          )}\n          <VideoCover\n            article={article}\n            media={media}\n            seriesTitle={seriesArticle && seriesArticle.title}\n            seriesLink={seriesLink}\n            playVideo={this.playVideo}\n            hideCover={this.state.hideCover}\n          />\n        </VideoPlayerContainer>\n\n        <Box px={20} maxWidth={1200} mx=\"auto\">\n          <Box pt={[40, 40, 60]}>\n            <VideoAbout article={article} color=\"white\" />\n          </Box>\n\n          {(relatedArticles || seriesArticle) && (\n            <Box pt={[60, 60, 100]}>\n              <ArticleCardsBlock {...this.props} color=\"white\" />\n            </Box>\n          )}\n        </Box>\n        <DisplayAd\n          adUnit={\n            isMobile\n              ? AdUnit.Mobile_SponsoredSeriesLandingPageAndVideoPage_Bottom\n              : AdUnit.Desktop_SponsoredSeriesLandingPageAndVideoPage_LeaderboardBottom\n          }\n          adDimension={adDimension}\n          targetingData={targetingData(\n            article,\n            isSponsored ? \"sponsorfeature\" : \"video\"\n          )}\n          isSeries\n        />\n      </VideoLayoutContainer>\n    )\n  }\n}\n\nconst VideoLayoutContainer = styled.div`\n  background: black;\n  color: white;\n  margin: auto;\n\n  ${NavContainer} {\n    position: absolute;\n    top: 0;\n  }\n`\n\nconst VideoPlayerContainer = styled.div`\n  position: relative;\n  width: 100vw;\n  height: 100vh;\n\n  ${VideoContainer} {\n    position: absolute;\n    top: 0;\n  }\n`\n"],"file":"VideoLayout.js"}