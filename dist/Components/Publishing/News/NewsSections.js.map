{"version":3,"sources":["../../../../src/Components/Publishing/News/NewsSections.tsx"],"names":["NewsSections","section","index","props","article","isMobile","isTruncated","sections","image_collection","layout","images","social_embed","text","body","default","sectionComponent","type","hasMainImage","limit","length","renderedSections","slice","map","child","getSection","authors","published_at","renderSections","renderByline","Component","getMaxWidth","NewsSectionContainer","styled","div","pMedia","sm","BylineContainer"],"mappings":"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","sourcesContent":["import { pMedia } from \"Components/Helpers\"\nimport { Truncator } from \"Components/Truncator\"\nimport React, { Component } from \"react\"\nimport styled from \"styled-components\"\nimport { NewsByline } from \"../Byline/NewsByline\"\nimport { ImageCollection } from \"../Sections/ImageCollection\"\nimport { SocialEmbed } from \"../Sections/SocialEmbed\"\nimport { Text } from \"../Sections/Text\"\nimport { ArticleData, SectionData } from \"../Typings\"\n\ninterface Props {\n  article: ArticleData\n  isMobile?: boolean\n  isTruncated: boolean\n}\n\ninterface ContainerProp {\n  type: string\n}\n\nexport class NewsSections extends Component<Props> {\n  getSection(section: SectionData, index: number) {\n    const { article, isMobile, isTruncated } = this.props\n\n    const sections = {\n      image_collection: (\n        <ImageCollection\n          sectionLayout={section.layout}\n          articleLayout={article.layout}\n          images={section.images}\n          targetHeight={500}\n          gutter={10}\n        />\n      ),\n      social_embed: <SocialEmbed section={section} />,\n      text: <Text html={section.body} layout={this.props.article.layout} />,\n      default: false,\n    }\n\n    const sectionComponent = sections[section.type] || sections.default\n    if (section.type === \"text\" && isTruncated) {\n      return (\n        <Truncator maxLineCount={isMobile ? 3 : 2}>\n          {sectionComponent}\n        </Truncator>\n      )\n    }\n    return sectionComponent\n  }\n\n  renderSections() {\n    const {\n      article: { sections },\n      isTruncated,\n    } = this.props\n    const hasMainImage = sections[0].type === \"image_collection\"\n\n    let limit\n    if (isTruncated) {\n      limit = hasMainImage ? 2 : 1\n    } else {\n      limit = sections.length\n    }\n\n    const renderedSections = sections.slice(0, limit).map((section, index) => {\n      const child = this.getSection(section, index)\n\n      if (child) {\n        return (\n          <NewsSectionContainer key={index} type={section.type}>\n            {child}\n          </NewsSectionContainer>\n        )\n      }\n    })\n\n    return renderedSections\n  }\n\n  renderByline() {\n    const {\n      article: { authors, published_at },\n    } = this.props\n\n    if (authors || published_at) {\n      return (\n        <BylineContainer>\n          <NewsByline {...this.props} />\n        </BylineContainer>\n      )\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderSections()}\n        {this.renderByline()}\n      </div>\n    )\n  }\n}\n\nconst getMaxWidth = type => {\n  if (type === \"image_collection\") {\n    return \"\"\n  } else {\n    return \"max-width: 660px;\"\n  }\n}\n\nexport const NewsSectionContainer = styled.div`\n  ${(props: ContainerProp) => getMaxWidth(props.type)};\n  margin-bottom: 20px;\n\n  ${pMedia.sm`\n    margin: 0 0 15px 0;\n    padding: 0;\n  `};\n`\n\nconst BylineContainer = styled.div`\n  max-width: 780px;\n  margin-top: 30px;\n\n  ${pMedia.sm`\n    margin: 30px 0 0 0;\n    padding: 0px;\n  `};\n`\n"],"file":"NewsSections.js"}