{"version":3,"sources":["../../../../../src/Components/Publishing/RelatedArticles/ArticleCards/ArticleCard.tsx"],"names":["ArticleCard","article","props","layout","media","published","editDate","editDescription","editImage","editTitle","editing","hasMedia","Object","values","length","renderMediaDate","color","mediaDate","date","published_at","formatedDate","Date","toISOString","isUnpublishedMedia","duration","e","preventDefault","isEditing","window","open","currentTarget","attributes","href","value","tracking","trackEvent","action","label","series","description","title","thumbnail_title","slug","openLink","renderDate","thumbnail_image","width","height","renderMediaCoverInfo","Component","defaultProps","Image","styled","img","ArticleCardImageContainer","Box","ArticleCardContainer","a","MediaContainer","Flex","md"],"mappings":"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","sourcesContent":["import { Box, color, Flex, Sans, Serif } from \"@artsy/palette\"\nimport { compact } from \"lodash\"\nimport React, { Component } from \"react\"\nimport track, { TrackingProp } from \"react-tracking\"\nimport styled from \"styled-components\"\n\nimport { media } from \"Components/Helpers\"\nimport { Byline } from \"Components/Publishing/Byline/Byline\"\nimport { Date as DateComponent } from \"Components/Publishing/Byline/Date\"\nimport { formatTime, getMediaDate } from \"Components/Publishing/Constants\"\nimport { IconVideoPlay } from \"Components/Publishing/Icon/IconVideoPlay\"\nimport { crop } from \"Utils/resizer\"\n\ninterface Props {\n  article?: any\n  color?: string\n  editing?: boolean\n  editDate?: any\n  editDescription?: any\n  editTitle?: any\n  editImage?: any\n  series?: any\n  tracking?: TrackingProp\n}\n\n@track()\nexport class ArticleCard extends Component<Props> {\n  public static defaultProps: Partial<Props>\n\n  isUnpublishedMedia = () => {\n    const { article } = this.props\n    return (\n      article.layout === \"video\" && article.media && !article.media.published\n    )\n  }\n\n  isEditing = () => {\n    const {\n      editDate,\n      editDescription,\n      editImage,\n      editTitle,\n      editing,\n    } = this.props\n\n    return editing || editDate || editDescription || editImage || editTitle\n  }\n\n  renderDate = () => {\n    const { article, editDate } = this.props\n    const hasMedia =\n      article.media && compact(Object.values(article.media)).length\n\n    if (editDate) {\n      return (\n        <Sans size=\"3t\" weight=\"medium\">\n          {editDate}\n        </Sans>\n      )\n    } else if (hasMedia) {\n      return this.renderMediaDate()\n    } else {\n      return (\n        <Byline\n          article={article}\n          color={this.props.color}\n          size=\"3t\"\n          layout=\"condensed\"\n        />\n      )\n    }\n  }\n\n  renderMediaDate = () => {\n    const { article } = this.props\n    const mediaDate = getMediaDate(article)\n    const date = article.layout === \"video\" ? mediaDate : article.published_at\n    const formatedDate = new Date(date).toISOString()\n\n    if (this.isUnpublishedMedia()) {\n      return (\n        <Sans size=\"3t\" weight=\"medium\">\n          <Flex alignItems=\"flex-end\">\n            <Box mr=\"5px\">Available</Box>\n            <DateComponent format=\"monthYear\" date={mediaDate} />\n          </Flex>\n        </Sans>\n      )\n    } else {\n      return <DateComponent layout=\"condensed\" size=\"3t\" date={formatedDate} />\n    }\n  }\n\n  renderMediaCoverInfo = () => {\n    const { article } = this.props\n\n    if (this.isUnpublishedMedia()) {\n      return (\n        <MediaContainer>\n          <Sans size={[\"8\", \"8\", \"10\", \"10\"]}>Coming Soon</Sans>\n        </MediaContainer>\n      )\n    } else {\n      return (\n        <MediaContainer justifyContent=\"space-between\" alignItems=\"flex-end\">\n          <IconVideoPlay color={this.props.color} />\n          <Sans size=\"3t\" weight=\"medium\" lineHeight=\"1em\">\n            {formatTime(article.media.duration)}\n          </Sans>\n        </MediaContainer>\n      )\n    }\n  }\n\n  openLink = e => {\n    e.preventDefault()\n\n    if (!this.isUnpublishedMedia() && !this.isEditing()) {\n      window.open(e.currentTarget.attributes.href.value)\n    }\n\n    this.props.tracking.trackEvent({\n      action: \"Click\",\n      label: \"Related article card\",\n    })\n  }\n\n  render() {\n    const {\n      article,\n      editDescription,\n      editImage,\n      editTitle,\n      series,\n    } = this.props\n    const { layout } = article\n    const isUnpublishedMedia = this.isUnpublishedMedia()\n\n    const description = editDescription ? editDescription : article.description\n\n    const title = editTitle\n      ? editTitle\n      : article.thumbnail_title || article.title\n\n    return (\n      <ArticleCardContainer\n        href={isUnpublishedMedia ? \"\" : article.slug}\n        color={this.props.color}\n        className=\"ArticleCard\"\n        published={!isUnpublishedMedia}\n        onClick={this.openLink}\n      >\n        <Flex\n          flexDirection={[\"column-reverse\", \"column-reverse\", \"row\", \"row\"]}\n          p={[20, 20, 30, 30]}\n        >\n          <Flex\n            width={[\"100%\", \"100%\", \"50%\", \"50%\"]}\n            mb={[0, 0, \"5px\", \"5px\"]}\n            flexDirection=\"column\"\n            justifyContent=\"space-between\"\n          >\n            <div>\n              {series && (\n                <Sans size=\"3t\" weight=\"medium\" mb={1}>\n                  {series.title}\n                </Sans>\n              )}\n              <Sans size={[\"8\", \"8\", \"10\", \"10\"]} mb={20}>\n                {title}\n              </Sans>\n\n              <Serif size={[\"4\", \"4\", \"5\", \"5\"]} mb={20}>\n                {description}\n              </Serif>\n            </div>\n            {this.renderDate()}\n          </Flex>\n\n          <ArticleCardImageContainer\n            width={[\"100%\", \"100%\", \"50%\", \"50%\"]}\n            ml={[0, 0, 30, 30]}\n            mb={[10, 10, 0, 0]}\n          >\n            {editImage ? (\n              editImage\n            ) : (\n              <Image\n                src={crop(article.thumbnail_image, { width: 680, height: 450 })}\n              />\n            )}\n            {article.media && layout === \"video\" && this.renderMediaCoverInfo()}\n          </ArticleCardImageContainer>\n        </Flex>\n      </ArticleCardContainer>\n    )\n  }\n}\n\nArticleCard.defaultProps = {\n  color: color(\"black100\"),\n}\n\nconst Image = styled.img`\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  object-position: center;\n  transition: opacity 0.15s;\n  display: block;\n`\n\nexport const ArticleCardImageContainer = styled(Box)`\n  position: relative;\n  height: inherit;\n  background: white;\n`\n\nexport const ArticleCardContainer = styled.a<{ published: boolean }>`\n  border: 1px solid;\n  border-radius: 2px;\n  color: ${props => props.color};\n  cursor: ${props => (props.published ? \"pointer\" : \"default\")};\n  text-decoration: none;\n  display: block;\n\n  ${Image} {\n    opacity: ${props => (props.published ? \"1\" : \"0.7\")};\n  }\n\n  &:hover {\n    ${Image} {\n      opacity: 0.7;\n    }\n  }\n`\n\nconst MediaContainer = styled(Flex)`\n  position: absolute;\n  left: 20px;\n  right: 20px;\n  bottom: 20px;\n\n  svg {\n    height: 40px;\n  }\n  ${media.md`\n    svg {\n      height: 30px;\n    }\n  `};\n`\n"],"file":"ArticleCard.js"}