{"version":3,"sources":["../../../../src/Components/Publishing/Sections/ArtworkCaption.tsx"],"names":["ArtworkCaption","children","renderPartner","renderCredit","joined","joinParts","renderArtists","renderTitleDate","renderPartnerCredit","props","color","layout","sectionLayout","key","delimiter","compacted","length","reduced","reduce","prev","curr","i","names","slice","concat","artwork","artist","artists","map","a","artistName","renderArtistName","joinedNames","joinArtistNames","linked","name","slug","createTextLink","href","renderTitle","renderDate","titleDate","title","date","partner","Boolean","credit","isFullscreenCaption","renderFullscreenCaption","renderClassicCaption","renderEditorialCaption","React","Component","ArtistNames","styled","span","ArtistName","StyledArtworkCaption","Sans","pMedia","xs","StyledClassicCaption","Serif","StyledFullscreenCaption","sm","Line","div"],"mappings":"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","sourcesContent":["import { color as Color, Sans, Serif } from \"@artsy/palette\"\nimport { ErrorBoundary } from \"Components/ErrorBoundary\"\nimport { pMedia } from \"Components/Helpers\"\nimport { ArticleLayout, SectionLayout } from \"Components/Publishing/Typings\"\nimport { Truncator } from \"Components/Truncator\"\nimport _ from \"lodash\"\nimport React from \"react\"\nimport styled from \"styled-components\"\n\ninterface ArtworkCaptionProps extends React.HTMLProps<HTMLDivElement> {\n  artwork: any\n  color?: string\n  layout?: ArticleLayout\n  sectionLayout?: SectionLayout\n  linked?: boolean\n  isFullscreenCaption?: boolean\n}\n\nexport class ArtworkCaption extends React.Component<ArtworkCaptionProps> {\n  static defaultProps = {\n    color: Color(\"black30\"),\n  }\n\n  joinParts(children, key, delimiter = \", \") {\n    const compacted = _.compact(children)\n\n    if (compacted.length) {\n      const reduced = compacted.reduce((prev, curr, i) => {\n        return [\n          prev,\n          <span key={`joinParts-${key}-${i}`}>{delimiter}</span>,\n          curr,\n        ]\n      })\n      return reduced\n    } else {\n      return []\n    }\n  }\n\n  joinArtistNames(names, delimiter = \", \") {\n    if (names.length === 0) {\n      return []\n    }\n\n    return names.slice(1).reduce(\n      (prev, curr, i) => {\n        return prev.concat([\n          <span key={`joinArtistNames-${i}`}>{delimiter}</span>,\n          curr,\n        ])\n      },\n      [names[0]]\n    )\n  }\n\n  renderArtists() {\n    const {\n      artwork: { artist, artists },\n    } = this.props\n\n    // Multiple artists\n    if (artists && artists.length > 1) {\n      const names = artists.map((a, i) => {\n        const artistName = this.renderArtistName(a, `renderArtists-${i}`)\n        return artistName\n      })\n\n      const joinedNames = this.joinArtistNames(names)\n      return joinedNames\n\n      // Single artist\n    } else if (artist) {\n      const artistName = this.renderArtistName(artist, \"renderArtists-single\")\n      return artistName\n    }\n  }\n\n  renderArtistName(artist, key: string) {\n    const { linked } = this.props\n    const { name, slug } = artist\n    const createTextLink = linked && slug\n\n    if (createTextLink) {\n      const href = `/artist/${slug}`\n\n      return (\n        <ArtistName key={`renderArtistName-${key}`}>\n          <a href={href}>{name}</a>\n        </ArtistName>\n      )\n    } else {\n      return (\n        <span key={`renderArtistName-${key}`} className=\"name\">\n          {name}\n        </span>\n      )\n    }\n  }\n\n  renderTitleDate() {\n    const children = [this.renderTitle(), this.renderDate()]\n    const titleDate = this.joinParts(children, \"renderTitleDate\")\n    return titleDate\n  }\n\n  renderTitle() {\n    const {\n      artwork: { slug, title },\n      linked,\n    } = this.props\n\n    if (title) {\n      if (linked) {\n        const href = `/artwork/${slug}`\n\n        return (\n          <span key=\"renderTitle\" className=\"title\">\n            <a href={href}>{title}</a>\n          </span>\n        )\n      } else {\n        return (\n          <span key=\"renderTitle\" className=\"title\">\n            {title}\n          </span>\n        )\n      }\n    }\n  }\n\n  renderDate() {\n    const {\n      artwork: { date },\n    } = this.props\n\n    if (date && date.length) {\n      return (\n        <span key=\"renderDate\" className=\"date\">\n          {date}\n        </span>\n      )\n    }\n  }\n\n  renderPartner() {\n    const {\n      artwork: {\n        partner: { name, slug },\n      },\n      linked,\n    } = this.props\n\n    if (name) {\n      const createTextLink = Boolean(linked && slug)\n\n      if (createTextLink) {\n        return (\n          <a key=\"renderPartner\" href={`/${slug}`}>\n            {name}\n          </a>\n        )\n      } else {\n        return name\n      }\n    }\n  }\n\n  renderCredit() {\n    const {\n      artwork: { credit },\n    } = this.props\n\n    if (credit && credit.length) {\n      return (\n        <span key=\"renderCredit\" className=\"credit\">\n          {credit}\n        </span>\n      )\n    }\n  }\n\n  renderPartnerCredit = () => {\n    const children = [this.renderPartner(), this.renderCredit()]\n\n    const joined = this.joinParts(children, \"renderPartnerCredit\", \". \")\n    return joined\n  }\n\n  renderFullscreenCaption = () => {\n    return (\n      <StyledFullscreenCaption size={[\"3\", \"4\"]} weight=\"medium\">\n        <Line>\n          <ArtistNames>{this.renderArtists()}</ArtistNames>\n        </Line>\n        <div>\n          <Line>{this.renderTitleDate()}</Line>\n          <Line>{this.renderPartnerCredit()}</Line>\n        </div>\n      </StyledFullscreenCaption>\n    )\n  }\n\n  renderClassicCaption = () => {\n    return (\n      <StyledClassicCaption\n        color={Color(\"black60\")}\n        size=\"2\"\n        className=\"display-artwork__caption\"\n      >\n        <Truncator>\n          <ArtistNames>{this.renderArtists()}</ArtistNames>\n          {this.renderTitleDate()}\n          {\". \"}\n          {this.renderPartner()}\n        </Truncator>\n      </StyledClassicCaption>\n    )\n  }\n\n  renderEditorialCaption = () => {\n    const { color, layout, sectionLayout } = this.props\n\n    return (\n      <StyledArtworkCaption\n        size=\"3\"\n        color={color}\n        layout={layout}\n        sectionLayout={sectionLayout}\n      >\n        <ArtistNames>{this.renderArtists()}</ArtistNames>\n        <div>\n          <Truncator>{this.renderTitleDate()}</Truncator>\n          <Truncator>{this.renderPartnerCredit()}</Truncator>\n        </div>\n      </StyledArtworkCaption>\n    )\n  }\n\n  render() {\n    const { layout, isFullscreenCaption } = this.props\n\n    return (\n      <ErrorBoundary>\n        <div>\n          {isFullscreenCaption\n            ? this.renderFullscreenCaption()\n            : layout === \"classic\"\n            ? this.renderClassicCaption()\n            : this.renderEditorialCaption()}\n        </div>\n      </ErrorBoundary>\n    )\n  }\n}\n\nconst ArtistNames = styled.span`\n  margin-right: 30px;\n`\n\nconst ArtistName = styled.span`\n  white-space: nowrap;\n`\n\nexport const StyledArtworkCaption = styled(Sans)<{\n  color?: string\n  layout?: ArticleLayout\n  sectionLayout?: SectionLayout\n}>`\n  padding: ${props => (props.sectionLayout === \"fillwidth\" ? \"0 10px;\" : \"0;\")};\n  margin-top: 10px;\n  display: flex;\n\n  a {\n    color: ${props => props.color};\n    text-decoration: none;\n  }\n\n  .title,\n  .title a {\n    font-style: italic;\n  }\n\n  ${pMedia.xs`\n    padding: 0 10px;\n  `};\n`\n\nconst StyledClassicCaption = styled(Serif)<{\n  className?: string\n  color?: string\n}>`\n  margin-top: 10px;\n  display: block;\n\n  a {\n    color: ${props => props.color};\n    text-decoration: none;\n  }\n\n  ${ArtistNames} {\n    margin-right: 0;\n    font-weight: bold;\n\n    &::after {\n      content: \", \";\n    }\n  }\n\n  .title {\n    font-style: italic;\n  }\n`\n\nconst StyledFullscreenCaption = styled(Sans)`\n  display: flex;\n\n  a {\n    color: black;\n    text-decoration: none;\n  }\n\n  .title,\n  .title a {\n    font-style: italic;\n  }\n\n  ${pMedia.sm`\n    flex-direction: column;\n  `};\n`\n\nconst Line = styled.div`\n  ${pMedia.sm`\n    &.artist-name {\n      margin-bottom: 5px;\n    }\n  `};\n`\n"],"file":"ArtworkCaption.js"}