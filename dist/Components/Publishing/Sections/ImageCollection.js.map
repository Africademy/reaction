{"version":3,"sources":["../../../../src/Components/Publishing/Sections/ImageCollection.tsx"],"names":["ImageCollectionComponent","dimensions","props","articleLayout","color","gutter","images","sectionLayout","width","size","fullscreenImages","renderedImages","map","image","i","url","imageSize","length","slideshowIndex","findIndex","img","renderedImage","type","height","margin","targetHeight","renderImages","React","PureComponent","ImageCollectionContainer","styled","div","pMedia","xs","ImageCollectionItem","sizeMeOptions","refreshRate","SIZE_ME_REFRESH_RATE","noPlaceholder","ImageCollection"],"mappings":"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","sourcesContent":["import { ImagesData } from \"Components/Publishing/Typings\"\nimport { find } from \"lodash\"\nimport React from \"react\"\nimport sizeMe from \"react-sizeme\"\nimport styled from \"styled-components\"\nimport fillwidthDimensions from \"../../../Utils/fillwidth\"\nimport { pMedia } from \"../../Helpers\"\nimport { SIZE_ME_REFRESH_RATE } from \"../Constants\"\nimport { ArticleLayout, SectionLayout } from \"../Typings\"\nimport { Artwork } from \"./Artwork\"\nimport { Image } from \"./Image\"\n\nexport interface ImageCollectionProps {\n  color?: string\n  images: ImagesData\n  targetHeight?: number\n  gutter?: number\n  sectionLayout?: SectionLayout\n  articleLayout?: ArticleLayout\n  size?: {\n    width: number\n  }\n  fullscreenImages: ImagesData\n}\n\nclass ImageCollectionComponent extends React.PureComponent<\n  ImageCollectionProps,\n  null\n> {\n  static defaultProps = {\n    size: {\n      width: 680,\n    },\n  }\n\n  renderImages(dimensions) {\n    const {\n      articleLayout,\n      color,\n      gutter,\n      images,\n      sectionLayout,\n      size: { width },\n      fullscreenImages,\n    } = this.props\n\n    const renderedImages = images.map((image, i) => {\n      const url = image.url || image.image\n\n      let imageSize\n      if (width <= 600 || dimensions.length === 1) {\n        imageSize = {}\n      } else {\n        imageSize = find(dimensions, [\"__id\", url])\n      }\n\n      const slideshowIndex =\n        fullscreenImages &&\n        fullscreenImages.findIndex(img => {\n          return img.url === image.url\n        })\n\n      let renderedImage\n      if (image.type === \"image\") {\n        renderedImage = (\n          <Image\n            image={image}\n            color={color}\n            sectionLayout={sectionLayout}\n            layout={articleLayout}\n            width={imageSize.width}\n            height={imageSize.height}\n            slideshowIndex={slideshowIndex}\n          />\n        )\n      } else if (image.type === \"artwork\") {\n        renderedImage = (\n          <Artwork\n            artwork={image}\n            color={color}\n            sectionLayout={sectionLayout}\n            layout={articleLayout}\n            width={imageSize.width}\n            height={imageSize.height}\n            slideshowIndex={slideshowIndex}\n          />\n        )\n      } else {\n        return false\n      }\n\n      const margin = i === dimensions.length - 1 ? 0 : gutter\n\n      return (\n        <ImageCollectionItem key={i} margin={margin} width={imageSize.width}>\n          {renderedImage}\n        </ImageCollectionItem>\n      )\n    })\n    return renderedImages\n  }\n\n  render() {\n    const { gutter, images, size, targetHeight } = this.props\n    const dimensions = fillwidthDimensions(\n      images,\n      size.width,\n      gutter,\n      targetHeight\n    )\n    const renderedImages = this.renderImages(dimensions)\n\n    return <ImageCollectionContainer>{renderedImages}</ImageCollectionContainer>\n  }\n}\n\nconst ImageCollectionContainer = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: center;\n\n  ${pMedia.xs`\n    flex-direction: column;\n  `};\n`\n\nexport const ImageCollectionItem = styled.div<{\n  margin?: number\n  width?: number\n}>`\n  margin-right: ${props => (props.margin ? props.margin + \"px\" : \"0px\")};\n  width: ${props => (props.width ? props.width + \"px\" : \"100%\")};\n  max-width: 100%;\n\n  img {\n    max-width: 100%;\n    height: auto;\n  }\n\n  ${pMedia.xs`\n    margin-bottom: 10px;\n    width: 100%;\n\n    img {\n      width: 100%;\n    }\n  `};\n`\n\nconst sizeMeOptions = {\n  refreshRate: SIZE_ME_REFRESH_RATE,\n  noPlaceholder: true,\n}\n\nexport const ImageCollection = sizeMe(sizeMeOptions)(ImageCollectionComponent)\n"],"file":"ImageCollection.js"}