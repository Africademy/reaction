{"version":3,"sources":["../../../src/Components/RelatedCollectionsRail/RelatedCollectionEntity.tsx"],"names":["RelatedCollectionEntity","collection","action_type","Schema","ActionType","Click","context_module","ContextModule","CollectionsRail","context_page_owner_type","OwnerType","Collection","destination_path","sd","APP_URL","slug","type","Type","Thumbnail","props","artworks_connection","artworks","headerImage","price_guidance","title","edges","map","node","bgImages","image","resized","url","imageSize","length","onLinkClick","bind","i","artistName","artist","a","name","alt","separator","precision","format","React","Component","CollectionTitle","Serif","StyledLink","Link","SingleImgContainer","Box","ImgOverlay","ArtworkImage","styled","img","width","ImgWrapper","Flex","RelatedCollectionEntityFragmentContainer"],"mappings":"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","sourcesContent":["import { Box, color, Flex, Link, Sans, Serif } from \"@artsy/palette\"\nimport { RelatedCollectionEntity_collection } from \"__generated__/RelatedCollectionEntity_collection.graphql\"\nimport { track } from \"Artsy/Analytics\"\nimport * as Schema from \"Artsy/Analytics/Schema\"\nimport currency from \"currency.js\"\nimport { compact } from \"lodash\"\nimport React from \"react\"\nimport { createFragmentContainer, graphql } from \"react-relay\"\nimport { data as sd } from \"sharify\"\nimport styled from \"styled-components\"\nimport { get } from \"Utils/get\"\n\nexport interface CollectionProps {\n  collection: RelatedCollectionEntity_collection\n}\n\n@track()\nexport class RelatedCollectionEntity extends React.Component<CollectionProps> {\n  @track<CollectionProps>(({ collection }) => ({\n    action_type: Schema.ActionType.Click,\n    context_module: Schema.ContextModule.CollectionsRail,\n    context_page_owner_type: Schema.OwnerType.Collection,\n    destination_path: `${sd.APP_URL}/collection/${collection.slug}`,\n    type: Schema.Type.Thumbnail,\n  }))\n  onLinkClick() {\n    // noop\n  }\n\n  render() {\n    const {\n      artworks: { artworks_connection },\n      headerImage,\n      price_guidance,\n      slug,\n      title,\n    } = this.props.collection\n    const artworks = artworks_connection.edges.map(({ node }) => node)\n    const bgImages = compact(\n      artworks.map(({ image }) => image && image.resized && image.resized.url)\n    )\n    const imageSize =\n      bgImages.length === 1 ? 262 : bgImages.length === 2 ? 130 : 86\n\n    return (\n      <Box pr={2}>\n        <StyledLink\n          href={`${sd.APP_URL}/collection/${slug}`}\n          onClick={this.onLinkClick.bind(this)}\n        >\n          <ImgWrapper pb={1}>\n            {bgImages.length ? (\n              bgImages.map((url, i) => {\n                const artistName = get(artworks[i].artist, a => a.name)\n                const alt = `${artistName ? artistName + \", \" : \"\"}${\n                  artworks[i].title\n                }`\n                return (\n                  <SingleImgContainer key={i}>\n                    <ImgOverlay width={imageSize} />\n                    <ArtworkImage\n                      key={i}\n                      src={url}\n                      width={imageSize}\n                      alt={alt}\n                    />\n                  </SingleImgContainer>\n                )\n              })\n            ) : (\n              <ArtworkImage src={headerImage} width={262} />\n            )}\n          </ImgWrapper>\n          <CollectionTitle size=\"3\">{title}</CollectionTitle>\n          {price_guidance && (\n            <Sans size=\"2\" color=\"black60\">\n              From $\n              {currency(price_guidance, {\n                separator: \",\",\n                precision: 0,\n              }).format()}\n            </Sans>\n          )}\n        </StyledLink>\n      </Box>\n    )\n  }\n}\n\nconst CollectionTitle = styled(Serif)`\n  width: max-content;\n`\n\nexport const StyledLink = styled(Link)`\n  text-decoration: none;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n\n  &:hover {\n    text-decoration: none;\n    ${CollectionTitle} {\n      text-decoration: underline;\n    }\n  }\n`\n\nconst SingleImgContainer = styled(Box)`\n  position: relative;\n  margin-right: 2px;\n\n  &:last-child {\n    margin-right: 0;\n  }\n`\n\nconst ImgOverlay = styled(Box)<{ width: number }>`\n  height: 125px;\n  background-color: ${color(\"black30\")};\n  opacity: 0.1;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 7;\n`\n\nexport const ArtworkImage = styled.img<{ width: number }>`\n  width: ${({ width }) => width}px;\n  height: 125px;\n  background-color: ${color(\"black10\")};\n  object-fit: cover;\n  object-position: center;\n  opacity: 0.9;\n`\n\nconst ImgWrapper = styled(Flex)`\n  width: 262px;\n`\n\nexport const RelatedCollectionEntityFragmentContainer = createFragmentContainer(\n  RelatedCollectionEntity,\n  {\n    collection: graphql`\n      fragment RelatedCollectionEntity_collection on MarketingCollection {\n        headerImage\n        slug\n        title\n        price_guidance\n        artworks(aggregations: [TOTAL], sort: \"-decayed_merch\") {\n          artworks_connection(first: 3) {\n            edges {\n              node {\n                artist {\n                  name\n                }\n                title\n                image {\n                  resized(width: 262) {\n                    url\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    `,\n  }\n)\n"],"file":"RelatedCollectionEntity.js"}