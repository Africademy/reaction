{"version":3,"sources":["../../../src/Components/v2/AuctionCard.tsx"],"names":["relativeTime","timeIn","now","time","DateTime","fromISO","abs","Math","diff","as","floor","upcomingLabel","sale","local","startAt","start_at","endAt","end_at","liveStartAt","live_start_at","isClosed","is_closed","isLiveOpen","is_live_open","isPreview","is_preview","registrationStatus","isRegistrationClosed","is_registration_closed","isRegistered","isLAI","dateTime","setZone","monthShort","day","AuctionCard","props","href","React","Component","LargeAuctionCard","headline","isGalleryAuction","isBenefit","subHeadline","src","badge","SmallAuctionCard","AuctionCardFragmentContainer","statusLabel","imageURL","s","cover_image","cropped","url","partnerName","partner","name"],"mappings":"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","sourcesContent":["import {\n  BorderBox,\n  Box,\n  Flex,\n  Image,\n  Link,\n  ResponsiveImage,\n  Sans,\n  Serif,\n} from \"@artsy/palette\"\nimport { AuctionCard_sale } from \"__generated__/AuctionCard_sale.graphql\"\nimport { Truncator } from \"Components/Truncator\"\nimport { DateTime } from \"luxon\"\nimport React from \"react\"\nimport { createFragmentContainer, graphql } from \"react-relay\"\nimport { get } from \"Utils/get\"\nimport { Media } from \"Utils/Responsive\"\n\nexport const relativeTime = (timeIn, now) => {\n  const time = DateTime.fromISO(timeIn)\n  const abs = Math.abs\n  if (abs(time.diff(now).as(\"days\")) >= 1) {\n    return `${Math.floor(time.diff(now).as(\"days\"))}d`\n  } else if (abs(time.diff(now).as(\"hours\")) >= 1) {\n    return `${Math.floor(time.diff(now).as(\"hours\"))}h`\n  } else if (abs(time.diff(now).as(\"minutes\")) >= 1) {\n    return `${Math.floor(time.diff(now).as(\"minutes\"))}m`\n  }\n  return `${Math.floor(time.diff(now).as(\"seconds\") % 60)}s`\n}\n\n// now defaults to DateTime.local() but can be overriden for unit testing\nexport const upcomingLabel = (\n  sale: AuctionCard_sale,\n  now = DateTime.local()\n) => {\n  const {\n    start_at: startAt,\n    end_at: endAt,\n    live_start_at: liveStartAt,\n    is_closed: isClosed,\n    is_live_open: isLiveOpen,\n    is_preview: isPreview,\n    registrationStatus,\n    is_registration_closed: isRegistrationClosed,\n  } = sale\n\n  const isRegistered = !!registrationStatus\n  const isLAI = !!liveStartAt\n  if (isPreview) {\n    return `Opens in ${relativeTime(startAt, now)}`\n  } else if (isClosed) {\n    return \"Auction closed\"\n  } else if (isLAI) {\n    if (isLiveOpen) {\n      return \"In progress\"\n    } else if (isRegistered || isRegistrationClosed) {\n      return `Live in ${relativeTime(liveStartAt, now)}`\n    } else {\n      const dateTime = DateTime.fromISO(liveStartAt).setZone(\"America/New_York\")\n      return `Register by ${dateTime.monthShort} ${dateTime.day}`\n    }\n  } else {\n    return `Ends in ${relativeTime(endAt, now)}`\n  }\n}\n\nexport interface AuctionCardProps {\n  src: string\n  href: string\n  headline: string\n  subHeadline: string\n  badge: string\n  isGalleryAuction: boolean\n  isBenefit: boolean\n}\n\nexport class AuctionCard extends React.Component<AuctionCardProps> {\n  render() {\n    return (\n      <Link href={this.props.href} noUnderline>\n        <Media at=\"xs\">\n          <SmallAuctionCard {...this.props} />\n        </Media>\n        <Media greaterThan=\"xs\">\n          <LargeAuctionCard {...this.props} />\n        </Media>\n      </Link>\n    )\n  }\n}\n\nexport const LargeAuctionCard = props => (\n  <BorderBox hover flexDirection=\"column\" height=\"300px\">\n    <Serif size=\"3t\" weight=\"semibold\">\n      <Truncator maxLineCount={1}>{props.headline}</Truncator>\n    </Serif>\n    <Serif size=\"3t\">\n      <Truncator maxLineCount={1}>\n        {!props.isGalleryAuction && !props.isBenefit ? (\n          props.subHeadline\n        ) : (\n          <>&nbsp;</>\n        )}\n      </Truncator>\n    </Serif>\n    {props.src && (\n      <Box height=\"200px\">\n        <ResponsiveImage src={props.src} my={2} pb=\"160px\" />\n      </Box>\n    )}\n    <Sans size=\"2\" weight=\"medium\">\n      <Truncator maxLineCount={1}>{props.badge}</Truncator>\n    </Sans>\n  </BorderBox>\n)\n\nexport const SmallAuctionCard = props => (\n  <BorderBox hover width=\"100%\" justifyContent=\"space-between\">\n    <Flex flexDirection=\"column\" justifyContent=\"space-between\">\n      <Box>\n        <Serif size=\"3t\" weight=\"semibold\">\n          <Truncator maxLineCount={1}>{props.headline}</Truncator>\n        </Serif>\n        {props.subHeadline && !props.isGalleryAuction && !props.isBenefit && (\n          <Serif size=\"3t\">\n            <Truncator maxLineCount={2}>{props.subHeadline}</Truncator>\n          </Serif>\n        )}\n      </Box>\n      <Sans size=\"2\" weight=\"medium\">\n        <Truncator maxLineCount={1}>{props.badge}</Truncator>\n      </Sans>\n    </Flex>\n    {props.src && <Image src={props.src} height=\"82px\" ml={2} />}\n  </BorderBox>\n)\n\nexport const AuctionCardFragmentContainer = createFragmentContainer<{\n  sale: AuctionCard_sale\n}>(\n  props => {\n    const { sale } = props\n\n    if (!sale) return\n\n    const statusLabel = upcomingLabel(sale)\n    const imageURL = get(sale, s => s.cover_image.cropped.url)\n    const partnerName = get(sale, s => s.partner.name)\n\n    return (\n      <AuctionCard\n        src={imageURL}\n        href={sale.href}\n        headline={partnerName}\n        subHeadline={sale.name}\n        badge={statusLabel}\n        isGalleryAuction={sale.isGalleryAuction}\n        isBenefit={sale.isBenefit}\n      />\n    )\n  },\n  {\n    sale: graphql`\n      fragment AuctionCard_sale on Sale {\n        cover_image {\n          cropped(width: 200, height: 180) {\n            url\n          }\n        }\n        isBenefit\n        isGalleryAuction\n        end_at\n        href\n        id\n        is_live_open\n        is_preview\n        live_start_at\n        registrationStatus {\n          id\n        }\n        is_registration_closed\n        name\n        start_at\n        is_closed\n        partner {\n          name\n        }\n      }\n    `,\n  }\n)\n"],"file":"AuctionCard.js"}