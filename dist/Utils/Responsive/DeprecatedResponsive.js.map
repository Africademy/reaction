{"version":3,"sources":["../../../src/Utils/Responsive/DeprecatedResponsive.tsx"],"names":["ResponsiveComponents","Consumer","displayName","Provider","Responsive","sharify","data","NODE_ENV","jest","ownerName","owner","_reactInternalFiber","_debugOwner","type","name","err","console","warn","props","React","Component","ResponsiveProvider","initialMatchingMediaQueries","mediaQueries","initialBreakpoint","breakpoints","Error","children"],"mappings":";;;;;;;;;;;;;;;;;;;AACA;;AAKA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAAMA,oBAAoB,GAAG,oDAA7B;AACAA,oBAAoB,CAACC,QAArB,CAA8BC,WAA9B,GAA4C,8BAA5C;AACEF,oBAAoB,CAACG,QAAtB,CAAuCD,WAAvC,GACC,8BADD;;IAGYE,U;;;;;;;;;;;;;wCAKS;AAClB;AACA;AACA,UAAIC,OAAO,CAACC,IAAR,CAAaC,QAAb,KAA0B,YAA1B,IAA0C,OAAOC,IAAP,KAAgB,WAA9D,EAA2E;AACzE,YAAIC,SAAJ;;AACA,YAAI;AACF,cAAMC,KAAK,GAAI,IAAD,CAAcC,mBAAd,CAAkCC,WAAlC,CAA8CC,IAA5D;AACAJ,UAAAA,SAAS,GAAGC,KAAK,CAACR,WAAN,IAAqBQ,KAAK,CAACI,IAAvC;AACD,SAHD,CAGE,OAAOC,GAAP,EAAY,CACZ;AACD;;AACDC,QAAAA,OAAO,CAACC,IAAR,CACE,0GAEIR,SAAS,sCAA+BA,SAA/B,mBAAwD,EAFrE,CADF;AAMD;AACF;;;6BAEQ;AACP,aAAO,6BAAC,oBAAD,CAAsB,QAAtB,EAAmC,KAAKS,KAAxC,CAAP;AACD;;;;EA3B6BC,eAAMC,S,GA8BtC;AACA;AACA;AACA;;;;;gBAjCahB,U,iBAGU,sB;;AAiDhB,IAAMiB,kBAAsD,GAAG,SAAzDA,kBAAyD,CAAAH,KAAK,EAAI;AAAA,aAIzEA,KAJyE;AAAA,MAE3EI,2BAF2E,QAE3EA,2BAF2E;AAAA,MAG3EC,YAH2E,QAG3EA,YAH2E;AAAA,cAQzEL,KARyE;AAAA,MAM3EM,iBAN2E,SAM3EA,iBAN2E;AAAA,MAO3EC,WAP2E,SAO3EA,WAP2E;;AAU7E,MAAID,iBAAJ,EAAuB;AACrBR,IAAAA,OAAO,CAACC,IAAR,CACE,sEACE,wCAFJ;AAID;;AAED,MAAIQ,WAAJ,EAAiB;AACfT,IAAAA,OAAO,CAACC,IAAR,CACE,gEACE,yBAFJ;AAID,GALD,MAKO,IAAI,CAACM,YAAL,EAAmB;AACxB,UAAM,IAAIG,KAAJ,CACJ,yEACE,cAFE,CAAN;AAID;;AAED,SACE,6BAAC,oBAAD,CAAsB,QAAtB;AACE,IAAA,YAAY,EACVH,YAAY,IACXE,WAHL;AAKE,IAAA,2BAA2B,EACzBH,2BAA2B,IAC1BE,iBAAiB,IAAI,CAACA,iBAAD;AAP1B,KAUGN,KAAK,CAACS,QAVT,CADF;AAcD,CA3CM;;;AA6CPN,kBAAkB,CAACnB,WAAnB,GAAiC,8BAAjC","sourcesContent":["import { themeProps } from \"@artsy/palette\"\nimport {\n  createResponsiveComponents,\n  MediaQueryMatches,\n  ResponsiveProviderProps as _ResponsiveProviderProps,\n} from \"@artsy/react-responsive-media/dist/DynamicResponsive\"\nimport React from \"react\"\nimport * as sharify from \"sharify\"\n\ntype MediaQuery = keyof typeof themeProps[\"mediaQueries\"]\n\nconst ResponsiveComponents = createResponsiveComponents<MediaQuery>()\nResponsiveComponents.Consumer.displayName = \"DeprecatedResponsive.Context\"\n;(ResponsiveComponents.Provider as any).displayName =\n  \"DeprecatedResponsive.Context\"\n\nexport class Responsive extends React.Component<\n  React.ConsumerProps<MediaQueryMatches<MediaQuery>>\n> {\n  static displayName = \"DeprecatedResponsive\"\n\n  componentDidMount() {\n    // TODO: We should look into making React’s __DEV__ available and have\n    //       webpack completely compile these away.\n    if (sharify.data.NODE_ENV !== \"production\" && typeof jest === \"undefined\") {\n      let ownerName\n      try {\n        const owner = (this as any)._reactInternalFiber._debugOwner.type\n        ownerName = owner.displayName || owner.name\n      } catch (err) {\n        // no-op\n      }\n      console.warn(\n        `[Responsive] The Responsive component has been deprecated in ` +\n          `favour of the Media component.${\n            ownerName ? ` It is being used in the ${ownerName} component.` : \"\"\n          }`\n      )\n    }\n  }\n\n  render() {\n    return <ResponsiveComponents.Consumer {...this.props} />\n  }\n}\n\n// TODO Once we consider the deprecation period of the previous ‘beakpoint’\n//      centric API to be over, we can replace the wrapper with just this line.\n//\n// export const ResponsiveProvider = Responsive.Provider\n\nexport type Breakpoint = keyof typeof themeProps[\"grid\"][\"breakpoints\"]\n\nexport interface DeprecatedResponsiveProviderProps {\n  initialBreakpoint?: Breakpoint\n  breakpoints: { [K in Breakpoint]: string }\n  children: React.ReactNode\n}\n\nexport type NewResponsiveProviderProps = _ResponsiveProviderProps<MediaQuery>\nexport type MatchingMediaQueries = NewResponsiveProviderProps[\"initialMatchingMediaQueries\"]\n\n// Using a union here means that the component can either be used using the new\n// API or the deprecated one.\nexport type ResponsiveProviderProps =\n  | NewResponsiveProviderProps\n  | DeprecatedResponsiveProviderProps\n\nexport const ResponsiveProvider: React.SFC<ResponsiveProviderProps> = props => {\n  const {\n    initialMatchingMediaQueries,\n    mediaQueries,\n  } = props as NewResponsiveProviderProps\n  const {\n    initialBreakpoint,\n    breakpoints,\n  } = props as DeprecatedResponsiveProviderProps\n\n  if (initialBreakpoint) {\n    console.warn(\n      \"[Responsive] The usage of `initialBreakpoint` is deprecated, use \" +\n        \"`initialMatchingMediaQueries` instead.\"\n    )\n  }\n\n  if (breakpoints) {\n    console.warn(\n      \"[Responsive] The usage of `breakpoints` is deprecated, use \" +\n        \"`mediaQueries` instead.\"\n    )\n  } else if (!mediaQueries) {\n    throw new Error(\n      \"[Responsive] If no `breakpoints` are specified, then `mediaQueries` \" +\n        \"is required.\"\n    )\n  }\n\n  return (\n    <ResponsiveComponents.Provider\n      mediaQueries={\n        mediaQueries ||\n        (breakpoints as NewResponsiveProviderProps[\"mediaQueries\"])\n      }\n      initialMatchingMediaQueries={\n        initialMatchingMediaQueries ||\n        (initialBreakpoint && [initialBreakpoint])\n      }\n    >\n      {props.children}\n    </ResponsiveComponents.Provider>\n  )\n}\n\nResponsiveProvider.displayName = \"DeprecatedResponsiveProvider\"\n"],"file":"DeprecatedResponsive.js"}