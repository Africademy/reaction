{"version":3,"sources":["../../src/Utils/user.ts"],"names":["getUser","user","_user","undefined","id","process","env","USER_ID","type","USER_TYPE","accessToken","USER_ACCESS_TOKEN","labFeatures","USER_LAB_FEATURES","lab_features","split","userHasLabFeature","featureName","u","includes","userIsAdmin"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AAEO,SAASA,OAAT,CAAiBC,IAAjB,EAA6D;AAClE,MAAIC,KAAK,GAAGD,IAAZ;;AAEA,MAAIC,KAAK,KAAKC,SAAd,EAAyB;AACvB,QAAMC,EAAE,GAAGC,OAAO,CAACC,GAAR,CAAYC,OAAvB;AACA,QAAMC,IAAI,GAAGH,OAAO,CAACC,GAAR,CAAYG,SAAZ,IAAyB,MAAtC;AACA,QAAMC,WAAW,GAAGL,OAAO,CAACC,GAAR,CAAYK,iBAAhC;AACA,QAAMC,WAAW,GAAGP,OAAO,CAACC,GAAR,CAAYO,iBAAhC;;AAEA,QAAIT,EAAE,IAAIM,WAAV,EAAuB;AACrBR,MAAAA,KAAK,GAAG;AACNE,QAAAA,EAAE,EAAFA,EADM;AAENM,QAAAA,WAAW,EAAXA,WAFM;AAGNF,QAAAA,IAAI,EAAJA;AAHM,OAAR;;AAMA,UAAII,WAAJ,EAAiB;AACfV,QAAAA,KAAK,CAACY,YAAN,GAAqBF,WAAW,CAACG,KAAZ,CAAkB,GAAlB,CAArB;AACD;AACF;AACF;;AAED,SAAOb,KAAP;AACD;;AAEM,SAASc,iBAAT,CAA2Bf,IAA3B,EAAuCgB,WAAvC,EAAqE;AAC1E,MAAMH,YAAY,GAAG,cAAIb,IAAJ,EAAU,UAAAiB,CAAC;AAAA,WAAIA,CAAC,CAACJ,YAAN;AAAA,GAAX,EAA+B,EAA/B,CAArB;AAEA,SAAOA,YAAY,CAACK,QAAb,CAAsBF,WAAtB,CAAP;AACD;;AAEM,SAASG,WAAT,CAAqBnB,IAArB,EAA2C;AAChD,SAAOA,IAAI,IAAIA,IAAI,CAACO,IAAL,KAAc,OAAtB,GAAgC,IAAhC,GAAuC,KAA9C;AACD","sourcesContent":["import { get } from \"./get\"\n\nexport function getUser(user: User | null | undefined): User | null {\n  let _user = user\n\n  if (_user === undefined) {\n    const id = process.env.USER_ID\n    const type = process.env.USER_TYPE || \"User\"\n    const accessToken = process.env.USER_ACCESS_TOKEN\n    const labFeatures = process.env.USER_LAB_FEATURES\n\n    if (id && accessToken) {\n      _user = {\n        id,\n        accessToken,\n        type,\n      }\n\n      if (labFeatures) {\n        _user.lab_features = labFeatures.split(\",\")\n      }\n    }\n  }\n\n  return _user\n}\n\nexport function userHasLabFeature(user: User, featureName: string): boolean {\n  const lab_features = get(user, u => u.lab_features, [])\n\n  return lab_features.includes(featureName)\n}\n\nexport function userIsAdmin(user?: User): boolean {\n  return user && user.type === \"Admin\" ? true : false\n}\n"],"file":"user.js"}